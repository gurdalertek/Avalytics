{"version":3,"sources":["services/tokenService.ts","components/styles/color_palette.ts","components/genericComponents/Title.tsx","components/Tokens.tsx","utils/generalUtil.ts","components/charts/candlestick/CrossHairs.js","components/charts/utils/mouseUtils.ts","components/charts/BasicChart.tsx","components/charts/utils/plotUtils.ts","components/charts/candlestick/Candle.js","components/charts/candlestick/Chart.js","components/charts/candlestick/CandleStickTemplate.js","components/genericComponents/AvadaSpinner.tsx","components/genericComponents/MultipleSelection.tsx","components/TokenView.tsx","utils/dateUtils.ts","services/dashboardService.ts","components/genericComponents/ExportIcon.tsx","components/genericComponents/List.tsx","components/dashboard/Gainers.tsx","components/dashboard/Losers.tsx","components/charts/pieChart/PieChart.tsx","components/dashboard/MarketCap.tsx","components/charts/miniChart/MiniChart.tsx","components/charts/miniChart/MiniChartContainer.tsx","components/dashboard/Dashboard.tsx","components/sidebar/NavItem.tsx","images/tokens.png","images/coins.png","images/pools.png","images/charts.png","images/whales.png","images/mempools.png","images/bridges.png","images/logo_2.png","components/sidebar/Sidebar.tsx","components/charts/heatmap/HeatMap.js","components/charts/barRaceChart/BarRaceChart.tsx","components/MultipleTokens.tsx","components/charts/steamChart/SteamGraph.js","services/dexService.ts","components/genericComponents/DateSlider.tsx","components/PoolView.tsx","components/genericComponents/UnderConstruction.tsx","App.tsx","reportWebVitals.ts","index.tsx"],"names":["getTokenList","a","TOKEN","Moralis","Object","extend","query","Query","select","find","results","tokenList","map","r","name","get","address","symbol","logoUrl","getTokenByAddress","equalTo","tokenInfo","getTokenPriceFromDB","TokenPrice","descending","limit","result","price","toFixed","marketCap","getTokenPriceHistoryDB","interval","since","upTo","candle","console","log","priceKey","fetchFromAverage","Error","greaterThan","lessThan","ascending","tokenPrices","obj","timestamp","exchange","candlePrices","closePrice","openPrice","maximumPrice","minimumPrice","assign","pctChange","fetchTokensForHeatMap","intervalStep","filterTokens","tokens","length","filter","t","includes","tokenPricesForHeat","Promise","all","prices","freshRecord","reverse","p","push","ColorPalette","Title","props","useState","popupActivated","setPopupActivated","popupCoords","setPopupCoords","style","margin","fontSize","title","hasInfo","onMouseEnter","e","target","getBoundingClientRect","rect","x","y","onMouseLeave","padding","icon","faInfoCircle","float","color","position","left","top","backgroundColor","opacity","zIndex","borderColor","borderWidth","borderRadius","width","height","TokenList","navigate","useNavigate","selected","setSelected","renderTokenPrice","token","renderMarketCap","variant","faSort","onClick","sort","idx","cursor","handleHover","src","Tokens","setTokenList","isAscending","setIsAscending","useEffect","then","filteredTokens","fetchTokenProps","updatedTokens","index","findIndex","prop","arr","b","parseFloat","CrossHairs","chart_dims","x1","y1","x2","pixel_width","y2","className","classNames","cross_hair","horz","pixel_height","vert","dollarAt","pixel","dollar","Math","abs","dollar_delta","dollar_low","BasicChart","data","dates","undefined","mouseCoords","setMouseCoords","round","reduce","min","dollar_high","ceil","max","svgRef","useRef","updateChart","transition","duration","line","svg","d3","current","attr","xScale","domain","Date","range","yMin","yMax","yScale","xAxis","ticks","selectAll","call","yAxis","xAxisGrid","axisBottom","tickSize","tickFormat","yAxisGrid","axisLeft","updateGrid","lineGenerator","d","i","curve","datum","setupLinearGraph","xTicks","yTicks","xLabel","yLabel","append","text","addAxis","addGrid","options","strokeColor","setupData","onMouseMove","nativeEvent","currentTarget","onMouseMoveInside","marginLeft","ref","fill","stroke","strokeWidth","Candle","candle_width","pixelFor","up","close","open","bar_top","bar_bottom","bar_height","wick_top","high","wick_bottom","low","down","wick","bottom","Chart","chart_width","chart_height","bar","floor","drawGraph","highs","lows","offsetX","offsetY","candle_x","CandleStickTemplate","buildCandles","time","setData","NFTicketSpinner","justifyItems","SpinnerCircularSplit","size","spinnerSize","message","MultipleSelection","direction","buttons","id","selectionHandler","value","buttonColor","textAlign","label","CHART_TYPES_ENUM","dateFromTimeStamp","date","month","parseInt","getMonth","toString","getDate","getFullYear","getTopGainers","currentDate","getTime","greaterThanOrEqualTo","gainers","slice","getTopLosers","getTopMCap","getHours","top5","get24HourPercentageChange","ExportIcon","justifyContent","faFileDownload","INTERVALS","LINE","CANDLESTICK","TokenView","intervalUnit","setIntervalUnit","radioOptions","setRadioOptions","getIntervalStep","setTokenInfo","setTokenPrices","setDates","chartType","setChartType","setSourceExchange","isLoading","setIsLoading","setNoDataAvailable","useParams","setIntervalStep","now","initialOffset","setInitialOffset","endOffset","setEndOffset","startDate","setStartDate","endDate","setEndDate","setPctChange","pct","h","sources","onChangeInterval","onChangeDate","fetchChartData","alignItems","fontWeight","AvadaSpinner","marginTop","xDomain","spacing","onChange","ro","borderStyle","onChangeEnd","defaultValue","step","minStepsBetweenThumbs","bg","boxSize","EntityList","tableStyle","noHead","entityProps","ep","entityList","entity","imageProp","postProcess","List","setEntityList","getter","entities","Gainers","Losers","PieChart","buildPieChart2","radius","node","arc","outerRadius","innerRadius","pie","percentage","feMerge","enter","on","this","midAngle","endAngle","startAngle","sin","cos","html","remove","tooltip","MarketCap","pieChartData","setPieChartData","allTokens","percentages","totalMCap","MiniChart","MiniChartContainer","setBorderColor","plotColor","setPlotColor","getPercentage","border","marginRight","Dashboard","NavItem","navSize","route","active","setActiveMenu","status","mt","flexDir","w","placement","as","ReactLink","to","_hover","ml","display","Menus","charts","coins","pools","whales","mempools","bridges","Sidebar","setNavSize","activeMenu","paddingTop","paddingRight","logo_2","m","mb","HeatMap","tokensList","setSvg","s","buildHeatMap","myGroups","Array","from","Set","myVars","pctgColor","interpolator","join","bandwidth","event","clientX","clientY","BarRaceChart","frameBorder","scrolling","sandbox","MultipleTokens","sliderStep","activeTokens","fetchPctChanges","tp","tl","checkActiveTokens","overflowY","listStyleType","marginBottom","iconColor","defaultChecked","checked","idxToRemove","indexOf","splice","handleCheckBoxChange","SteamGraph","setMaxKey","buildChart","chartData","keys","maxArray","maxKey","forEach","key","absMax","getMax","stackedData","offset","Tooltip","area","y0","grp","__data__","getPoolList","POOL","poolList","token0","token1","pairAddress","getInfoForPoolsForPair","PoolInfo","poolInfo","dexName","symbol0","symbol1","reserve0","reserve1","tvl0","tvl1","DateSlider","addressesToInclude","PoolView","setPoolList","activePools","setActivePools","setKeys","lastRequestLength","setLastRequestLength","newArr","newKey","nd","addressArray","ap","k","addressToRemove","newKeys","checkIsActive","UnderConstruction","CoreManager","set","App","initialize","appId","serverURL","serverUrl","useMoralis","authenticate","isAuthenticating","isAuthenticated","logout","authError","user","fontStyle","templateColumns","clsSpan","colSpan","overflow","path","element","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","theme","extendTheme","initialColorMode","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.a51125d2.chunk.js","sourcesContent":["import Moralis from \"moralis\";\nimport {getBlockFromDate} from \"./miscService\";\n\nexport const getTokenList = async () : Promise<any[]> => {\n\n    const TOKEN = Moralis.Object.extend(\"TokenDetails\")\n    const query = new Moralis.Query(TOKEN);\n    query.select(\"name\", \"id\",\"address\",\"symbol\",\"logoUrl\");\n    const results = await query.find();\n    const tokenList = results.map((r)=>{\n        return {name:r.get(\"name\"),address: r.get(\"address\"),symbol: r.get(\"symbol\"), logoUrl: r.get(\"logoUrl\")}\n    });\n    return tokenList;\n}\n\nexport const getTokenByAddress = async (address: any) => {\n    const TOKEN = Moralis.Object.extend(\"TokenDetails\")\n    const query = new Moralis.Query(TOKEN);\n    query.select(\"name\", \"id\",\"address\",\"symbol\",\"logoUrl\");\n    query.equalTo(\"address\", address);\n    const results = await query.find();\n    const tokenInfo = results.map((r)=>{\n        return {name:r.get(\"name\"),address: r.get(\"address\"),symbol: r.get(\"symbol\"), logoUrl: r.get(\"logoUrl\")}\n    });\n    return tokenInfo[0];\n}\n\n\nexport const getTokenPrice = async (address : any , chain?: any, to_date?: any) => {\n\n    const options  = {\n        address: address,\n        chain: chain?chain:\"avalanche\"\n    };\n\n    if (to_date) {\n        const blockInfo = await getBlockFromDate(to_date);\n        Object.assign(options,{to_block: blockInfo.block});\n    }\n\n    const tokenPrice = await Moralis.Web3API.token.getTokenPrice(options);\n    console.log(`Price for token with address ${address} is ${tokenPrice.usdPrice}`);\n    return tokenPrice;\n}\n\n\nexport const getTokenPriceFromDB = async (address : any) => {\n    const TokenPrice = Moralis.Object.extend(\"Token15Min\")\n    const query = new Moralis.Query(TokenPrice);\n\n    query.select(\"timeStamp\",\"price\", \"address\", \"marketCap\");\n\n    query.equalTo(\"address\", address);\n    query.descending(\"timeStamp\");\n    query.limit(1);\n    const result = await query.find();\n    return {price: result[0]?.get(\"price\").toFixed(2), address: result[0]?.get(\"address\"), marketCap: result[0]?.get(\"marketCap\")};\n}\n\n\n\n\n\n\nexport const getTokenMetadata = async (address : any , chain?: any) => {\n    const options : any  = {\n        addresses: address,\n        chain: chain?chain:\"avalanche\"\n    };\n    const metadata = await Moralis.Web3API.token.getTokenMetadata(options);\n    return metadata;\n}\n\n\n\n\nexport const getTokenPriceHistory = async (address:any, dateInterval: string[]) => {\n    const priceHistory = [];\n    for(let date of dateInterval) {\n        console.log(\"Date is: \", date);\n        try {\n            const price : any = await getTokenPrice(address, \"avalanche\", date);\n            console.log(\"Timestamp date : \", date);\n            price[\"date\"] = new Date(date);\n            price[\"address\"] = address;\n            priceHistory.push(price);\n        } catch (e) {\n            console.log(\"Error getting price\")\n        }\n\n    }\n    console.log(\"Price history is: \", priceHistory);\n    return priceHistory;\n}\n\nexport const getTokenPriceHistoryDB = async (address : any, interval: string, since? : any, upTo? : any, candle? : boolean) : Promise<any>=> {\n    console.log(\"Received class name: \", interval);\n    // console.log(\"Asking prices previous to: \", since);\n    let TokenPrice = Moralis.Object.extend(interval);\n    const query = new Moralis.Query(TokenPrice);\n    const fetchFromAverage = (interval==\"Token1Day\" || interval==\"Token4Hour\" || interval==\"Token1Hour\");\n    const priceKey = fetchFromAverage?\"averagePrice\":\"price\";\n\n    if(candle) {\n        if(!fetchFromAverage)\n            throw new Error(\"Interval not supported for candle data\")\n\n        query.select(priceKey, \"closePrice\",\"openPrice\", \"maximumPrice\",\"minimumPrice\",\"id\", \"timeStamp\",\"exchange\", \"symbol\", \"pctChange\");\n    } else {\n        query.select(priceKey, \"id\", \"timeStamp\",\"exchange\", \"symbol\", \"pctChange\");\n    }\n\n\n    query.equalTo(\"address\", address);\n    if(since) {\n        query.greaterThan(\"timeStamp\", since)\n    }\n    if (upTo) {\n        query.lessThan(\"timeStamp\", upTo);\n    }\n    query.ascending(\"timeStamp\");\n    query.limit(5000);\n    const results = await query.find();\n    const tokenPrices = results.map((r)=>{\n        const obj : any = {price:fetchFromAverage?r.get(\"averagePrice\"):r.get(\"price\"),timestamp: r.get(\"timeStamp\"), exchange:r.get(\"exchange\"), symbol: r.get(\"symbol\")};\n        if (candle) {\n            const candlePrices = {\n                closePrice: r.get(\"closePrice\"),\n                openPrice: r.get(\"openPrice\"),\n                maximumPrice:r.get(\"maximumPrice\"),\n                minimumPrice:r.get(\"minimumPrice\")\n            }\n            Object.assign(obj, {...candlePrices})\n        }\n\n        if(interval!=='Token15Min')\n            Object.assign(obj,{pctChange: r.get(\"pctChange\")})\n\n        return obj;\n    });\n    return tokenPrices;\n\n}\n\n\nexport const getTokenLogoUrls = async () : Promise<any[]>  => {\n    const TokenLogo = Moralis.Object.extend(\"TokenLogos\")\n    const query = new Moralis.Query(TokenLogo);\n    query.select(\"address\", \"logoUrl\");\n    // query.equalTo(\"address\", address);\n    const tokenUrls = await query.find();\n    const urls = tokenUrls.map(tu=>{\n        return{'logoUrl': tu.get(\"logoUrl\"), 'address': tu.get('address')}\n    })\n    return urls;\n}\n\nexport const getTokenLogoUrlForAddress = async (address: string) : Promise<any>  => {\n    const TokenLogo = Moralis.Object.extend(\"TokenLogos\")\n    const query = new Moralis.Query(TokenLogo);\n    query.select(\"address\", \"logoUrl\");\n    query.equalTo(\"address\", address);\n    const tokenUrl = await query.find();\n    return tokenUrl[0];\n}\n\n\n\n\nexport const fetchTokensForHeatMap = async (intervalStep : any, since?: any, upTo?: any, filterTokens:any[] = []) => {\n\n    let tokens = await getTokenList();\n    if(filterTokens.length > 0) {\n        tokens = tokens.filter((t:any)=>filterTokens.includes(t.symbol));\n    }\n    const tokenPricesForHeat : any[] = [];\n    await Promise.all(tokens.map(async (t) => {\n        const prices = await getTokenPriceHistoryDB(t.address, intervalStep, since, upTo)\n        const freshRecord: { timestamp: any; symbol: any; price: any; pctChange: any }[] = [];\n        prices.reverse().map((p:any)=>{\n            freshRecord.push({\"timestamp\":p.timestamp,\"symbol\":p.symbol, \"price\":p.price, \"pctChange\": p.pctChange});\n        });\n        tokenPricesForHeat.push(...freshRecord);\n    }))\n    return tokenPricesForHeat;\n\n}\n\n\n\nconst fetchCandleData = async (address : any, interval: string, since? : any, upTo? : any) : Promise<any>=> {\n    console.log(\"Received class name: \", interval);\n    // console.log(\"Asking prices previous to: \", since);\n    let TokenPrice = Moralis.Object.extend(interval);\n    const query = new Moralis.Query(TokenPrice);\n    const fetchFromAverage = (interval==\"Token1Day\" || interval==\"Token4Hour\" || interval==\"Token1Hour\");\n    const priceKey = fetchFromAverage?\"averagePrice\":\"price\";\n\n\n\n    query.select(priceKey, \"id\", \"timeStamp\",\"exchange\", \"symbol\", \"pctChange\");\n    query.equalTo(\"address\", address);\n    if(since) {\n        query.greaterThan(\"timeStamp\", since)\n    }\n    if (upTo) {\n        query.lessThan(\"timeStamp\", upTo);\n    }\n    query.ascending(\"timeStamp\");\n    query.limit(5000);\n    const results = await query.find();\n    const tokenPrices = results.map((r)=>{\n        const obj = {price:fetchFromAverage?r.get(\"averagePrice\"):r.get(\"price\"),timestamp: r.get(\"timeStamp\"), exchange:r.get(\"exchange\"), symbol: r.get(\"symbol\")};\n        if(interval!=='Token15Min')\n            Object.assign(obj,{pctChange: r.get(\"pctChange\")})\n\n        return obj;\n    });\n    return tokenPrices;\n\n}","\n\nexport const ColorPalette = {\n    mainColor: \"#056674\",\n    secondaryColor: \"#FF4B5C\",\n    thirdColor: \"#FF4B5C\",\n    highlight: \"#66BFBF\",\n    red: \"#fd4431\",\n    green: \"#09D766\",\n    backgroundColor:'white',\n    navFontColor: 'white'\n}\n\n\n\n//     {\n//     mainColor: \"#0070b5\",\n//     secondaryColor: \"#49b7e9\",\n//     thirdColor: \"#8681e8\",\n//     highlight: \"#fe89be\",\n//     red: \"#fd4431\",\n//     green: \"#09D766\"\n// }","\nimport {HStack, Text} from '@chakra-ui/react';\nimport {faInfoCircle} from \"@fortawesome/free-solid-svg-icons\";\nimport {FontAwesomeIcon} from \"@fortawesome/react-fontawesome\";\nimport React, {useState} from \"react\";\nimport {ColorPalette} from \"../styles/color_palette\";\n\nexport default function Title(props: any) {\n\n    const [popupActivated, setPopupActivated] = useState(false);\n\n    const [popupCoords, setPopupCoords] = useState([0,0]);\n\n    const handleInfoHover = (e:any) => {\n        console.log(\"Event: \", e.target);\n        console.log(\"Boundingrect: \", e.target.getBoundingClientRect())\n        const rect = e.target.getBoundingClientRect()\n        setPopupCoords([rect.x, rect.y])\n        console.log(\"Activating popup\");\n        setPopupActivated(true);\n    }\n\n    const handleInfoOut = () => {\n        setPopupActivated(false);\n\n    }\n\n\n    return(<HStack style={{margin:20}}>\n        <Text fontSize='2xl'>{props.title}</Text>\n        {props.hasInfo && <div onMouseEnter={handleInfoHover} onMouseLeave={handleInfoOut} style={{padding:10}}><FontAwesomeIcon  icon={faInfoCircle}  style={{float:'right',color:ColorPalette.mainColor}}/></div>}\n        {popupActivated && (<div style={{position:'absolute', left: popupCoords[0] + 20,top: popupCoords[1] + 20, float:'left',backgroundColor:ColorPalette.mainColor, opacity:0.95, zIndex:999,borderColor:'gray', borderWidth:1,\n            borderRadius:10, width:200, height: 200, padding:20}}>Hey</div>)}\n    </HStack>)\n}","import React, {ReactNode, useEffect, useState} from 'react';\nimport {getTokenList, getTokenLogoUrls, getTokenPrice, getTokenPriceFromDB} from \"../services/tokenService\";\nimport {\n    Table,\n    Tbody,\n    Td,\n    Th,\n    Thead,\n    Tr, useDisclosure\n} from \"@chakra-ui/react\";\nimport {useNavigate} from \"react-router-dom\";\nimport Title from \"./genericComponents/Title\";\nimport {ColorPalette} from \"./styles/color_palette\";\nimport AvadaSpinner from \"./genericComponents/AvadaSpinner\";\nimport  { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faCheckSquare, faSort } from '@fortawesome/free-solid-svg-icons'\nimport {sort} from \"../utils/generalUtil\";\n// import fontawesome from '@fortawesome/fontawesome'\n\n// fontawesome.library.add(faSort as any);\n\nfunction Drawer(props: { isFullHeight: boolean, placement: string, onClose: any, isOpen: any, children: ReactNode }) {\n    return null;\n}\n\nfunction Tokens(props:any)  {\n\n    const [tokenList, setTokenList] = useState<any[]>([])\n    const [isAscending, setIsAscending] = useState(false);\n\n    useEffect (()=> {\n        getTokenList()\n\n            .then((tokens)=>{\n                const filteredTokens = tokens.filter((t:any)=>t.symbol!='ANY' && t.symbol!='SUSHI.e');\n                console.log(\"FIltered tokens: \", filteredTokens);\n                setTokenList(filteredTokens);\n\n                // fetchTokenProps(tokenList);\n\n            });\n    },[])\n\n    useEffect(()=> {\n        fetchTokenProps(tokenList);\n    },[tokenList])\n\n\n    const fetchTokenProps = (tokens: any[]) => {\n        console.log(\"Will start props fetching!!\");\n        tokens.map((token)=> {\n            console.log(\"Fetching for: \", token.address);\n            getTokenPriceFromDB(token.address)\n                .then((t)=>{\n                    console.log(\"Received that...\");\n                    const updatedTokens = tokenList;\n                    const index = updatedTokens.findIndex((obj:any) => obj.address == t.address);\n                    if(updatedTokens[index]) {\n                        updatedTokens[index].price = t.price?t.price:0;\n                        updatedTokens[index].marketCap = t.marketCap?t.marketCap:0;\n                        console.log(\"Updated: \", t.address);\n                        setTokenList(updatedTokens);\n                    }\n                })\n        })\n    }\n\n\n\n\n\n    const sortTokens = (prop : string) => {\n        setTokenList(sort(tokenList, prop, isAscending));\n        setIsAscending(!isAscending);\n    }\n\n\n    return (\n        <div style={{...props.style}}>\n            <Title title=\"Tokens\" hasInfo/>\n            {tokenList.length>0 &&\n                <TokenList tokenList={tokenList} sort={sortTokens}/>}\n        </div>\n    );\n}\n\n\nfunction TokenList(props: any) {\n\n\n    const navigate = useNavigate();\n\n    const [selected, setSelected] = useState<number | null>(null);\n\n    const handleHover = (e: any, idx: number) => {\n        setSelected(idx);\n    }\n\n    const handleLeave = () => {\n        setSelected(null);\n    }\n\n    const renderTokenPrice = (token : any) => {\n        if(token.price > -1) {\n            return (<span>{'$ ' + token.price}</span>)\n        } else {\n            // return (<AvadaSpinner spinnerSize={40} style={{alignItems:'center', justifyContent: 'center'}}/>)\n            return(<span>-</span>)\n        }\n    }\n\n    const renderMarketCap = (token:any) => {\n        if(token.marketCap > -1) {\n            return (<span>{'M$ ' + (token.marketCap / 10**6).toFixed(2)}</span>)\n        } else {\n            // return (<AvadaSpinner spinnerSize={40} style={{alignItems:'center', justifyContent: 'center'}}/>)\n            return(<span>-</span>)\n        }\n    }\n\n\n\n\n\n\n\n    return(<Table variant='simple'>\n        <Thead>\n            <Tr>\n                <Th>Name</Th>\n                <Th>Symbol <FontAwesomeIcon icon={faSort} onClick={()=>props.sort('symbol')}/></Th>\n                <Th>Current Price <FontAwesomeIcon icon={faSort} onClick={()=>props.sort('price')}/></Th>\n                <Th>Market Cap <FontAwesomeIcon icon={faSort} onClick={()=>props.sort('marketCap')}/></Th>\n            </Tr>\n        </Thead>\n            <Tbody>\n                {props.tokenList.map((token: any, idx: number)=> {\n                    return(<Tr key={idx} style={selected==idx?{backgroundColor:ColorPalette.highlight, borderRadius:10, cursor:'pointer'}:{}}\n                               onMouseEnter={(e)=> handleHover(e, idx)}\n                               onMouseLeave={()=>handleLeave()}\n                               onClick={()=>navigate(`/token/${token.address}`)}>\n                        <Td><img style={{width:64, height:64}} src={token.logoUrl}/></Td>\n                        <Td>{token.symbol}</Td>\n                        <Td>{renderTokenPrice(token)}</Td>\n                        <Td>{renderMarketCap(token)}</Td>\n                    </Tr>)\n                })}\n            </Tbody>\n\n    </Table>)\n}\n\n\n\n\nexport default Tokens;","\n\nexport const sort = (arr: any[],prop: string, isAscending: boolean) => {\n\n    if(isAscending) {\n        arr.sort( function( a:any , b:any){\n            if(parseFloat(a[prop]) > parseFloat(b[prop])) return 1;\n            if(parseFloat(a[prop]) < parseFloat(b[prop])) return -1;\n            return 0;\n        });\n    } else {\n        arr.sort( function( a:any , b:any){\n            if(parseFloat(a[prop]) > parseFloat(b[prop])) return -1;\n            if(parseFloat(a[prop]) < parseFloat(b[prop])) return 1;\n            return 0;\n        });\n    }\n\n    console.log(\"Sorted: \", arr);\n    return arr;\n}\n","import React from \"react\";\nimport classNames from \"classnames\";\n\nconst CrossHairs = props => {\n    const { x, y, chart_dims,style } = props;\n\n    if (x + y === 0) {\n        return <></>;\n    }\n\n    return (\n        <>\n            <line\n                x1={0}\n                y1={y}\n                x2={chart_dims.pixel_width}\n                y2={y}\n                style={style}\n                className={classNames({\n                    cross_hair: true,\n                    horz: true\n                })}\n            />\n            <line\n                x1={x}\n                y1={0}\n                x2={x}\n                y2={chart_dims.pixel_height}\n                style={style}\n                className={classNames({\n                    cross_hair: true,\n                    vert: true\n                })}\n            />\n        </>\n    );\n};\n\nexport default CrossHairs;\n","export const onMouseLeave = (setMouseCoords: any) => {\n    setMouseCoords({\n        x: 0,\n        y: 0\n    });\n};\n\nexport const onMouseMoveInside = (e:any, setMouseCoords: any) => {\n    setMouseCoords({\n        x:\n            e.nativeEvent.x -\n            Math.round(e.currentTarget.getBoundingClientRect().left),\n        y:\n            e.nativeEvent.y -\n            Math.round(e.currentTarget.getBoundingClientRect().top)\n    });\n};\n\nexport const dollarAt = (pixel:any, chart_dims: any) => {\n    const dollar =\n        (Math.abs(pixel - chart_dims.pixel_height) / chart_dims.pixel_height) *\n        chart_dims.dollar_delta +\n        chart_dims.dollar_low;\n\n    return pixel > 0 ? dollar.toFixed(2) : \"-\";\n};","import React, {useEffect, useRef, useState} from \"react\";\nimport * as d3 from \"d3\";\nimport {transition} from \"d3-transition\";\nimport {select, selectAll} from \"d3-selection\";\nimport {axisBottom, axisLeft} from \"d3\";\nimport CrossHairs from \"./candlestick/CrossHairs\";\nimport {dollarAt, onMouseLeave, onMouseMoveInside} from \"./utils/mouseUtils\";\nimport {ColorPalette} from \"../styles/color_palette\";\nimport {addAxis, addGrid, updateGrid} from \"./utils/plotUtils\";\n\n\nconst BasicChart = (props: any) => {\n\n    const {data,width, height, dates} = props;\n\n    const [lineGenerator, setLineGenerator] = useState<any>(undefined);\n\n\n    const [mouseCoords, setMouseCoords] = useState({\n        x: 0,\n        y: 0\n    });\n\n    const dollar_low = Math.round(data.reduce((a:number,b:number) => Math.min(a,b)));\n    const dollar_high = Math.ceil(data.reduce((a:number,b: number)=> Math.max(a,b)));\n\n\n    const chart_dims = {\n        pixel_width: width,\n        pixel_height: height,\n        dollar_high,\n        dollar_low,\n        dollar_delta: dollar_high - dollar_low\n    };\n\n\n    // console.log(\"Domain is: \", xDomain);\n\n    const svgRef = useRef<any>();\n\n    function updateChart() {\n        const {\n             data,\n        } = props;\n\n\n        const t : any = transition().duration(1000);\n\n        const line = select('#line');\n\n        const svg = d3.select(svgRef.current)\n            .attr('width', width)\n            .attr('height', height)\n            .style('background', ColorPalette.backgroundColor)\n            .style('margin-left', '50')\n            .style('overflow', 'visible');\n\n\n        const xScale: any = d3.scaleTime()\n            .domain([new Date(dates[0]*1000),new Date(dates[dates.length -1] * 1000)]) // x ticks\n            .range([0, width]) // x width\n\n        const yMin = Math.round(data.reduce((a:number,b:number) => Math.min(a,b)));\n        const yMax = Math.ceil(data.reduce((a:number,b: number)=> Math.max(a,b)));\n        const yScale: any = d3.scaleLinear()\n            .domain([yMin, yMax])\n            .range([height, 0])\n\n\n        const xAxis: any = d3.axisBottom(xScale)\n            .ticks(5);\n\n        svg.selectAll('g.x.axis')\n            .attr(\"transform\",\"translate(0,\" + height + \")\")\n            .call(xAxis);\n\n        const yAxis: any = d3.axisLeft(yScale)\n            .ticks(5);\n\n        svg.selectAll('g.y.axis')\n            .call(yAxis);\n\n\n        updateGrid(svg,xScale,yScale,height,width);\n\n\n        const lineGenerator = d3.line()\n            .x((d, i)=> xScale(new Date(dates[i]*1000)))\n            .y(yScale)\n            .curve(d3.curveLinear)\n\n        line\n            .datum(data)\n            .transition(t)\n            .attr('d', lineGenerator);\n    }\n\n\n    const setupData = (svg:any, data:any, line:any, options: any) => {\n        // Setup data\n        svg\n            .append('path')\n            .datum(data)\n            .attr('id', 'line')\n            .attr('stroke', options.strokeColor?options.strokeColor:'black')\n            .attr('stroke-width', 2)\n            .attr('fill', 'none')\n            .attr('d', line);\n    }\n\n\n\n    const setupLinearGraph = (prices: any[]) => {\n\n        // Setup svg\n        const svg = d3.select(svgRef.current)\n            .attr('width', width)\n            .attr('height', height)\n            .style('background', ColorPalette.backgroundColor)\n            .style('margin-left', '50')\n            .style('overflow', 'visible');\n\n        // Setup scaling\n\n        const xScale: any = d3.scaleTime()\n            .domain([new Date(dates[0]*1000),new Date(dates[dates.length -1] * 1000)]) // x ticks\n            .range([0, width]) // x width\n\n\n        const yMin = Math.round(data.reduce((a:number,b:number) => Math.min(a,b)));\n        const yMax = Math.ceil(data.reduce((a:number,b: number)=> Math.max(a,b)));\n        console.log(\"Y max is: \", yMax);\n        console.log(\"Y min is: \", yMin);\n        const yScale: any = d3.scaleLinear()\n            .domain([yMin, yMax])\n            .range([height, 0])\n\n        // Setting up line\n        const line = d3.line()\n            .x((d, i)=> xScale(i))\n            .y(yScale)\n            .curve(d3.curveLinear)\n        // setLineGenerator(line);\n\n        addAxis(svg,xScale,yScale, width,height,5,5,'Date', 'USD Price');\n\n        addGrid(svg,xScale,yScale,height,width);\n\n        const dataOptions = {strokeColor: ColorPalette.secondaryColor}\n        setupData(svg, data,line, dataOptions);\n        return line;\n    }\n\n\n    useEffect(()=>{\n\n        setupLinearGraph(data);\n    },[])\n\n\n    useEffect(() => {\n        updateChart()\n        }, [data])\n\n\n        return (\n            <div>\n                <svg onMouseMove={(e)=>onMouseMoveInside(e, setMouseCoords)}\n                     onMouseLeave={()=>onMouseLeave(setMouseCoords)}\n                     style={{marginLeft: \"100px\", zIndex:-1}} ref={svgRef}>\n                    <text x=\"10\" y=\"16\" fill={ColorPalette.mainColor} fontSize=\"25\">\n                        <tspan x=\"10\" y=\"30\" color={ColorPalette.red}>\n                            Dollars: ${dollarAt(mouseCoords.y, chart_dims)}\n                        </tspan>\n                    </text>\n                    <CrossHairs style={{stroke:\"#892CDC\",strokeWidth:2}} x={mouseCoords.x} y={mouseCoords.y} chart_dims={{pixel_width: width, pixel_height: height}} />\n                </svg>\n\n            </div>\n        )\n\n};\n\nexport default BasicChart;","import {axisBottom, axisLeft} from \"d3\";\nimport {ColorPalette} from \"../../styles/color_palette\";\nimport * as d3 from \"d3\";\n\nexport const addGrid = (svg: any, xScale : any, yScale : any, height : any, width : any) => {\n    const tickFormat : any = \"\";\n\n    const xAxisGrid : any = axisBottom(xScale).tickSize(-height).tickFormat(tickFormat).ticks(10);\n    const yAxisGrid : any = axisLeft(yScale).tickSize(-width).tickFormat(tickFormat).ticks(10);\n    svg.append('g')\n        .attr('class', 'x axis-grid')\n        .attr('color', ColorPalette.highlight)\n        .attr('transform', 'translate(0,' + height + ')')\n        .call(xAxisGrid);\n    svg.append('g')\n        .attr('class', 'y axis-grid')\n        .attr('color', ColorPalette.highlight)\n        .call(yAxisGrid);\n}\n\n\nexport const updateGrid = (svg: any, xScale : any, yScale : any, height : any, width : any) => {\n    const tickFormat : any = \"\";\n\n    const xAxisGrid : any = axisBottom(xScale).tickSize(-height).tickFormat(tickFormat).ticks(10);\n    const yAxisGrid : any = axisLeft(yScale).tickSize(-width).tickFormat(tickFormat).ticks(10);\n    svg.selectAll('g.y.axis-grid')\n        .attr('class', 'y axis-grid')\n        .attr('color', ColorPalette.highlight)\n        .call(xAxisGrid)\n\n    svg.selectAll('g.y.axis-grid')\n        .attr('class', 'y axis-grid')\n        .attr('color', ColorPalette.highlight)\n        .call(yAxisGrid);\n}\n\n\n\nexport const addAxis = (svg: any, xScale: any, yScale: any, width:number, height: number, xTicks:number, yTicks:number , xLabel: string, yLabel: string) => {\n    const dateFormat : any = d3.timeFormat('%b')\n    // Setup the axes\n\n    const yAxis = d3.axisLeft(yScale)\n        .ticks(5);\n\n    const xAxis = d3.axisBottom(xScale)\n        .ticks(5);\n\n    svg.append('g')\n        .attr('class', 'x axis')\n        .attr('color', ColorPalette.mainColor)\n        .attr(\"transform\",\"translate(0,\" + height + \")\")\n        .call(xAxis)\n\n    svg.append('g')\n        .attr('color', ColorPalette.mainColor)\n        .attr('class', 'y axis')\n        .call(yAxis)\n\n\n    svg.append(\"text\")\n        .attr(\"class\", \"y label\")\n        .attr('color', ColorPalette.mainColor)\n        .attr(\"text-anchor\", \"end\")\n        .attr(\"y\", -50 - 10)\n        .attr(\"x\",  - height/2 + 10)\n        .attr(\"dy\", \".75em\")\n        .attr(\"transform\", \"rotate(-90)\")\n        .text(yLabel);\n}\n\n\n","import React from \"react\";\nimport classNames from \"classnames\";\nimport * as d3 from \"d3\";\n\nconst Candle = props => {\n    const { data, x, candle_width, pixelFor } = props;\n\n    const up = data.close > data.open;\n    const bar_top = pixelFor(up ? data.close : data.open);\n    const bar_bottom = pixelFor(up ? data.open : data.close);\n    const bar_height = bar_bottom - bar_top;\n    const wick_top = pixelFor(data.high);\n    const wick_bottom = pixelFor(data.low);\n\n    return (\n        <>\n            <rect\n                x={x - candle_width / 2}\n                y={bar_top}\n                width={candle_width}\n                height={bar_height}\n                className={classNames({\n                    candle: true,\n                    up: up,\n                    down: !up\n                })}\n            />\n            <line\n                className={classNames({\n                    wick: true,\n                    top: true,\n                    up: up,\n                    down: !up\n                })}\n                x1={x}\n                y1={bar_top}\n                x2={x}\n                y2={wick_top}\n            />\n            <line\n                className={classNames({\n                    wick: true,\n                    bottom: true,\n                    up: up,\n                    down: !up\n                })}\n                x1={x}\n                y1={bar_bottom}\n                x2={x}\n                y2={wick_bottom}\n            />\n        </>\n    );\n};\n\nexport default Candle;\n","import React, {useEffect, useRef, useState} from \"react\";\nimport classNames from \"classnames\";\nimport * as d3 from \"d3\";\n\nimport Candle from \"./Candle\";\nimport CrossHairs from \"./CrossHairs\";\nimport {axisBottom, axisLeft} from \"d3\";\nimport {dollarAt, onMouseLeave, onMouseMoveInside} from \"../utils/mouseUtils\";\n\nconst Chart = props => {\n    const { data, width: chart_width, height: chart_height } = props;\n\n    // console.log(\"Received data: \", data);\n    const svgRef = useRef();\n    // let { last_bar_idx = 0, bars_wide = 40 } = props;\n\n    // last_bar_idx should default to the last bar in the data, or else be sure passed-in value doesn't exceed the last bar\n    // last_bar_idx = last_bar_idx > 0 ? Math.min(last_bar_idx, data.length - 1) : data.length - 1;\n\n    const [mouseCoords, setMouseCoords] = useState({\n        x: 0,\n        y: 0\n    });\n\n\n    // find the high and low bounds of all the bars being sidplayed\n    const dollar_high = d3.max(data.map(bar => bar.high)) * 1.05;\n    const dollar_low = d3.min(data.map(bar => bar.low)) * 0.95;\n\n    console.log(`Highs are: high ${dollar_high} and low ${dollar_low}`);\n\n    const chart_dims = {\n        pixel_width: chart_width,\n        pixel_height: chart_height,\n        dollar_high,\n        dollar_low,\n        dollar_delta: dollar_high - dollar_low\n    };\n\n    const dollarAt = pixel => {\n        const dollar =\n            (Math.abs(pixel - chart_dims.pixel_height) / chart_dims.pixel_height) *\n            chart_dims.dollar_delta +\n            chart_dims.dollar_low;\n\n        return pixel > 0 ? dollar.toFixed(2) : \"-\";\n    };\n\n    const pixelFor = dollar => {\n        return Math.abs(\n            ((dollar - chart_dims[\"dollar_low\"]) / chart_dims[\"dollar_delta\"]) *\n            chart_dims[\"pixel_height\"] -\n            chart_dims[\"pixel_height\"]\n        );\n    };\n\n    const onMouseLeave = () => {\n        setMouseCoords({\n            x: 0,\n            y: 0\n        });\n    };\n\n    const onMouseMoveInside = e => {\n        setMouseCoords({\n            x:\n                e.nativeEvent.x -\n                Math.round(e.currentTarget.getBoundingClientRect().left),\n            y:\n                e.nativeEvent.y -\n                Math.round(e.currentTarget.getBoundingClientRect().top)\n        });\n    };\n\n    const onMouseClickInside = e => {\n        console.log(`Click at ${e.nativeEvent.offsetX}, ${e.nativeEvent.offsetY}`);\n    };\n\n    // calculate the candle width\n    const candle_width = Math.floor((chart_width / data.length) * 0.7);\n\n\n    const addGrid = (svg, xScale, yScale, height , width ) => {\n        const tickFormat = \"\";\n\n        const xAxisGrid = axisBottom(xScale).tickSize(-height).tickFormat(tickFormat).ticks(10);\n        const yAxisGrid = axisLeft(yScale).tickSize(-width).tickFormat(tickFormat).ticks(10);\n        svg.append('g')\n            .attr('class', 'x axis-grid')\n            .attr('color', '#c8a1ff')\n            .attr('transform', 'translate(0,' + height + ')')\n            .call(xAxisGrid);\n        svg.append('g')\n            .attr('class', 'y axis-grid')\n            .attr('color', '#c8a1ff')\n            .call(yAxisGrid);\n    }\n\n    const addAxis = (svg, xScale, yScale,width, height, ticks) => {\n        // Setup the axes\n        const xAxis = d3.axisBottom(xScale)\n            .ticks(ticks)\n            .tickFormat((i) => i + 1)\n\n        const yAxis = d3.axisLeft(yScale)\n            .ticks(5);\n\n        svg.append('g')\n            .call(xAxis)\n            .attr('transform', `translate(0, ${height})`)\n\n        svg.append('g')\n            .call(yAxis)\n\n\n        svg.append(\"text\")\n            .attr(\"class\", \"y label\")\n            .attr(\"text-anchor\", \"end\")\n            .attr(\"y\", -50)\n            .attr(\"x\",  - height/2)\n            .attr(\"dy\", \".75em\")\n            .attr(\"transform\", \"rotate(-90)\")\n            .text(\"Price (USD)\");\n\n        return [xAxis, yAxis]\n    }\n\n    const drawGraph = () => {\n\n        const xScale = d3.scaleLinear()\n            .domain([0, data.length]) // x ticks\n            .range([0, props.width]) // x width\n        const highs = data.map(d=>d.high);\n        const lows = data.map(d=>d.low);\n        const yMin = Math.round(lows.reduce((a,b) => Math.min(a,b)));\n        const yMax = Math.ceil(highs.reduce((a,b)=> Math.max(a,b)));\n        console.log(\"Y max is: \", yMax);\n        console.log(\"Y min is: \", yMin);\n        const yScale = d3.scaleLinear()\n            .domain([yMin, yMax])\n            .range([props.height, 0])\n\n        const ticksNumber = 10;\n\n        const svg = d3.select(svgRef.current)\n            .attr('width', props.width)\n            .attr('height', props.height)\n            .style('background', 'white')\n            .style('margin-left', '50')\n            .style('overflow', 'visible');\n\n        const [xAxis,yAxis] = addAxis(svg,xScale,yScale, props.width,props.height,ticksNumber);\n\n\n        addGrid(svg,xScale,yScale,props.height,props.width);\n\n    }\n\n    useEffect(() => {\n        // console.log(\"Setting up with prices: \", data);\n        drawGraph();\n    }, [])\n\n\n\n    return (\n        <svg\n            ref={svgRef}\n            width={chart_width}\n            height={chart_height}\n            // onMouseMove={onMouseMoveInside}\n            onClick={onMouseClickInside}\n            // onMouseLeave={onMouseLeave}\n\n            onMouseMove={(e)=>onMouseMoveInside(e, setMouseCoords)}\n            onMouseLeave={()=>onMouseLeave(setMouseCoords)}\n            style={{marginLeft: \"100px\", zIndex:-1}} ref={svgRef}>\n            <text x=\"10\" y=\"16\" fill=\"black\" fontSize=\"20\">\n                <tspan x=\"10\" y=\"30\" color=\"black\">\n                    Dollars: ${dollarAt(mouseCoords.y, chart_dims)}\n                </tspan>\n            </text>\n            {data.map((bar, i) => {\n                const candle_x = (chart_width / (data.length + 1)) * (i + 1);\n                return (\n                    <Candle\n                        key={i}\n                        data={bar}\n                        x={candle_x}\n                        candle_width={candle_width}\n                        pixelFor={pixelFor}\n                    />\n                );\n            })}\n            <text x=\"10\" y=\"16\" fill=\"white\" fontSize=\"10\">\n                <tspan x=\"10\" y=\"30\">\n                    Dollars: ${dollarAt(mouseCoords.y)}\n                </tspan>\n            </text>\n            <CrossHairs style={{stroke:\"black\",strokeWidth:2}} x={mouseCoords.x} y={mouseCoords.y} chart_dims={chart_dims} />\n        </svg>\n    );\n};\n\nexport default Chart;\n","import React, {useEffect, useState} from \"react\";\nimport * as d3 from \"d3\";\nimport \"./styles.css\";\nimport Chart from \"./Chart\";\nimport {getTokenPriceHistoryDB} from \"../../../services/tokenService\";\n\n\nexport default function CandleStickTemplate(props) {\n\n    let bars_displayed = 40;\n    let last_bar_displayed = 0;\n\n    const randomOne = (weight = 1) => {\n        return (Math.random() + Math.random() - 1) * weight;\n    };\n\n\n\n\n    const buildCandles = (d) => {\n\n\n        console.log(\"Candles: \", d);\n\n        return props.data.map((prices, i) => {\n            const open =prices.openPrice;\n            const close = prices.closePrice\n            const high = prices.maximumPrice\n            const low = prices.minimumPrice;\n            return {\n                time: i,\n                open,\n                high,\n                low,\n                close\n            };\n        })\n\n    }\n\n\n    buildCandles();\n\n    const [data, setData] = useState(buildCandles());\n    // const changeData = () => {\n    //     setData(generateData);\n    //\n    // };\n\n    useEffect(()=>{\n        console.log(\"Building candles\");\n        setData(buildCandles());\n    },props.data)\n\n\n    // const data_on_chart = data.slice()\n\n    return (\n        <div>\n\n                <div>\n                    <Chart data={data} width={props.width} height={props.height} />\n                </div>\n\n        </div>\n    );\n}\n","import {SpinnerCircularSplit} from \"spinners-react\";\nimport React from \"react\";\nimport {ColorPalette} from \"../styles/color_palette\";\n\n\nconst NFTicketSpinner = (props:any) => {\n\n    return(\n        <div  style={{...props.style, justifyItems:'center'}}>\n            <SpinnerCircularSplit size={props.spinnerSize?props.spinnerSize:\"60\"} color={ColorPalette.secondaryColor}/>\n            <span style={{color:ColorPalette.secondaryColor,  marginLeft:\"20px\"}}>{props.message}</span>\n        </div>\n    )\n\n\n}\n\nexport default NFTicketSpinner;","import {Stack} from \"@chakra-ui/react\";\nimport {useState} from \"react\";\n\n\nexport default function MultipleSelection(props: any) {\n\n    const [selected, setSelected] = useState<number>(-1);\n\n\n    const handleHover = (e: any, idx: number) => {\n        setSelected(idx);\n    }\n\n    const handleLeave = () => {\n        setSelected(-1);\n    }\n\n\n    return (\n        <div >\n\n            <Stack direction='row'>\n                {\n                    props.buttons.map((b:any, idx: number)=>{\n                        return (<div id={`select-${idx}`} onClick={()=>props.selectionHandler(b.value)}\n                                     style={{backgroundColor:selected==idx?'grey':props.style.buttonColor,\n                            margin:10,\n                            padding:10,\n                            textAlign:\"center\",\n                             // height:20,\n                            borderRadius: 10,\n                            cursor: 'pointer',\n                            }}\n                                     onMouseEnter={(e)=> handleHover(e, idx)}\n                                     onMouseLeave={(e)=>handleLeave()}\n                        >\n                            <span>{b.label}</span>\n                        </div>)\n                    })\n                }\n            </Stack>\n        </div>\n    )\n}","import React, {useEffect, useState} from \"react\";\nimport {\n    getTokenByAddress,\n    getTokenMetadata,\n    getTokenPriceHistory,\n    getTokenPriceHistoryDB\n} from \"../services/tokenService\";\nimport {useParams} from \"react-router-dom\";\nimport {\n    Button, Flex,\n    Grid,\n    GridItem, HStack,\n    Radio,\n    RadioGroup,\n    RangeSlider, RangeSliderFilledTrack, RangeSliderThumb,\n    RangeSliderTrack,\n    Select,\n    Stack, VStack\n} from \"@chakra-ui/react\";\n\nimport BasicChart from \"./charts/BasicChart\";\nimport RadioSelection from \"./genericComponents/RadioSelection\";\nimport CandleStickTemplate from \"./charts/candlestick/CandleStickTemplate\";\nimport AvadaSpinner from \"./genericComponents/AvadaSpinner\";\nimport MultipleSelection from \"./genericComponents/MultipleSelection\";\nimport DatePicker from \"react-datepicker\";\nimport \"react-datepicker/dist/react-datepicker.css\";\nimport {ColorPalette} from \"./styles/color_palette\";\nimport {dateFromTimeStamp} from \"../utils/dateUtils\";\nimport {get24HourPercentageChange} from \"../services/dashboardService\";\nimport {FaFontAwesome} from \"react-icons/all\";\nimport {faFileExport, faFileDownload} from \"@fortawesome/free-solid-svg-icons\";\nimport {FontAwesomeIcon} from \"@fortawesome/react-fontawesome\";\nimport ExportIcon from \"./genericComponents/ExportIcon\";\n\nenum CHART_TYPES_ENUM {\n    LINE,\n    CANDLESTICK\n}\n\n\nconst INTERVALS = [\n    { value: \"Token1Day\", label: '1 Day' },\n    { value: \"Token4Hour\", label: '4 Hours' },\n    { value: \"Token1Hour\", label: '1 Hour' },\n    {value: \"Token15Min\", label: '15 Mins'}\n]\n\nconst CHART_TYPES = [{ value: CHART_TYPES_ENUM.LINE, label: 'Line Chart' },\n    {value: CHART_TYPES_ENUM.CANDLESTICK, label: 'Candlestick chart'}]\n\n\n\nfunction TokenView(props:any)  {\n\n    const [intervalUnit, setIntervalUnit] = useState(INTERVALS[0].value);\n    const [radioOptions, setRadioOptions] = useState(INTERVALS);\n\n    const getIntervalStep = () => {\n        switch (intervalUnit) {\n            case \"Token1Day\":\n                return 24 * 60 * 60;\n            case \"Token4Hour\":\n                return 4 * 60 * 60;\n            case \"Token1Hour\":\n                return 60 * 60;\n            case \"Token15Min\":\n                return 15 * 60;\n            default:\n                return 1;\n        }\n    }\n\n    const [tokenInfo, setTokenInfo] = useState<any>(null);\n    const [tokenPrices, setTokenPrices] = useState <any[]>([]);\n    const [dates, setDates] = useState<any[]>([]);\n    const [chartType, setChartType] = useState(CHART_TYPES_ENUM.LINE);\n    const [sourceExchange, setSourceExchange] = useState<any[]>([]);\n    const [isLoading, setIsLoading] = useState<boolean>(false);\n    const [noDataAvailable, setNoDataAvailable] = useState(false);\n    const {address} = useParams<string>();\n    // const [intervalUnit, setIntervalUnit] = useState<any>(INTERVALS[0].value); // Gives us used interval (1day, 4hour, 1hour, ...)\n    const [intervalStep, setIntervalStep] = useState<any>(getIntervalStep()) // Step for slider\n    const [initialOffset, setInitialOffset] = useState((Date.now() - 30*24*60*60*1000)/1000); // 30 days in the past in seconds\n    const [endOffset, setEndOffset] = useState(Date.now()/1000);\n    const [startDate, setStartDate] = useState<any>(dateFromTimeStamp(initialOffset));\n    const [endDate, setEndDate] = useState<any>(dateFromTimeStamp(Date.now()/1000));\n    const [pctChange, setPctChange] = useState(0);\n\n\n    useEffect(()=>{\n        setIsLoading(true);\n        getTokenByAddress(address)\n            .then((t)=> {\n                console.log(\"Received: \", t);\n                setTokenInfo(t);\n            })\n\n        get24HourPercentageChange(address)\n            .then((pct)=> {\n                setPctChange(pct)\n                // setPlotColor(pct>0?ColorPalette.green:ColorPalette.red)\n            });\n\n        getTokenPriceHistoryDB(address, intervalUnit, initialOffset, endOffset, chartType!==CHART_TYPES_ENUM.LINE)\n            .then((h:any[])=> {\n                setTokenPrices([...h.map(r=>r)]);\n                if(tokenPrices.length==0) {\n                    setNoDataAvailable(true);\n                }\n                setDates([...h.map(h=>h.timestamp)]);\n                console.log(\"Got price history: \", tokenPrices)\n                setIsLoading(false);\n                const sources : any[] = [];\n                h.map((p)=>{\n                    if(!sources.includes(p.exchange)) {\n                        sources.push(p.exchange);\n                    }\n                })\n                setSourceExchange(sources);\n                console.log(\"Sources: \", sources);\n            })\n\n    },[])\n\n\n    const displayChart = () => {\n        if(chartType === CHART_TYPES_ENUM.LINE) {\n            return (<BasicChart data={tokenPrices.map(d=>d.price)} dates={dates} xDomain={dates}  width={1200} height={450} />)\n        } else {\n            return (<CandleStickTemplate data={tokenPrices.map(d=>d.price)} address={address} intervalUnit={intervalUnit} initialOffset={initialOffset} endOffset={endOffset} width={1200} height={450}/>)\n        }\n    }\n\n\n    const onChangeInterval = async (interval: any) => {\n        console.log(\"Asking price due to interval change: \", interval);\n        setIntervalUnit(interval);\n        setIntervalStep(getIntervalStep());\n\n        getTokenPriceHistoryDB(address, interval, initialOffset, endOffset, chartType!==CHART_TYPES_ENUM.LINE)\n            .then((h:any[])=> {\n                setTokenPrices([...h.map(r=>r)]);\n                if(tokenPrices.length==0) {\n                    setNoDataAvailable(true);\n                }\n                setDates([...h.map(h=>h.timestamp)]);\n                setIsLoading(false);\n            })\n    }\n\n    const fetchChartData = (date: any) => {\n        getTokenPriceHistoryDB(address, intervalUnit, Math.round(date[0]),Math.round(date[1]), chartType!==CHART_TYPES_ENUM.LINE)\n            .then((h:any[])=> {\n                setTokenPrices([...h.map(r=>r)]);\n                if(tokenPrices.length==0) {\n                    setNoDataAvailable(true);\n                }\n                setDates([...h.map(h=>h.timestamp)]);\n                setIsLoading(false);\n            })\n    }\n\n\n    const onDateDrag = (date: any) => {\n        setStartDate(dateFromTimeStamp(date[0]))\n        setEndDate(dateFromTimeStamp(date[1]))\n    }\n\n    const onChangeDate = (date:any) => {\n        setInitialOffset(date[0]);\n        setEndOffset(date[1]);\n\n        fetchChartData(date);\n    }\n\n\n    const chartSelectionHandler = (e: any) => {\n        console.log(\"Triggered with vale: \", e);\n        if(chartType === CHART_TYPES_ENUM.CANDLESTICK) {\n            setRadioOptions(INTERVALS);\n        } else {\n            setRadioOptions(radioOptions.filter((ro)=>ro.value!='Token15Min'))\n        }\n        setChartType(e);\n    }\n\n    const getPercentage = () => {\n\n        // Change this to be last 24 hour percentage\n        return parseFloat((pctChange * 100).toFixed(2));\n    }\n\n\n    return (\n        <div style={{alignItems:'center'}}>\n            {tokenInfo && (<div style={{margin:40, fontSize:'1.3em', fontWeight:'bold' , alignItems:'center'}}>\n                <HStack>\n                    <img src={tokenInfo.logoUrl} style={{width:60, height:60, margin:10}}/>\n                    <h2>{tokenInfo.name} / {tokenInfo.symbol}</h2>\n                </HStack>\n            </div>)}\n\n\n            {isLoading && <div style={{alignItems:'center', justifyItems:\"center\"}}><AvadaSpinner style={{width:'100%', height: \"100%\", marginTop:100, marginLeft:500}} message={`Loading price history`}/></div>}\n\n\n            {(!isLoading && tokenPrices.length) && <div style={{margin:50}}>\n                {chartType === CHART_TYPES_ENUM.LINE && <BasicChart data={tokenPrices.map(d=>d.price)} dates={dates} xDomain={dates}  width={1200} height={450} />}\n                {chartType !== CHART_TYPES_ENUM.LINE && <CandleStickTemplate data={tokenPrices} width={1200} height={450}/>}\n\n\n            </div>}\n\n\n            <div style={{width:'50%', marginLeft:60, marginTop:40}}>\n\n                <HStack  spacing={'24px'}>\n                    <RadioGroup onChange={(e)=>onChangeInterval(e)} value={intervalUnit}>\n                        <Stack direction='row'>\n                            {radioOptions.map(i=>{\n                                return (<Radio value={i.value}>{i.label}</Radio>)\n                            })}\n\n                        </Stack>\n                    </RadioGroup>\n                    <MultipleSelection title={\"Chart Type\"} selectionHandler={chartSelectionHandler} style={{buttonColor:ColorPalette.thirdColor}} buttons={[{value:CHART_TYPES_ENUM.LINE, label:'Line chart'},{value:CHART_TYPES_ENUM.CANDLESTICK, label:'Candle chart'}]}/>\n                    <ExportIcon/>\n                </HStack>\n\n                <div style={{borderWidth:1, borderStyle:'solid', borderRadius: 20, padding:20}}>\n                <HStack>\n\n\n                        <div>\n                            <span>Start date: </span>\n                            <span>{startDate}</span>\n                        </div>\n                    <div> / </div>\n                        <div>\n                            <span>End date: </span>\n                            <span>{endDate}</span>\n                        </div>\n\n                </HStack>\n\n                <RangeSlider onChange={(e)=> onDateDrag(e)}\n                             onChangeEnd={(e)=>onChangeDate(e)}\n                             defaultValue={[initialOffset, Math.round(Date.now() / 1000)]}\n                             min={1629504000} max={Math.round(Date.now() / 1000)}\n                             step={intervalStep} minStepsBetweenThumbs={10}\n\n                >\n                    <RangeSliderTrack bg={ColorPalette.thirdColor}>\n                        <RangeSliderFilledTrack bg={ColorPalette.thirdColor} />\n                    </RangeSliderTrack>\n                    <RangeSliderThumb boxSize={6} index={0} />\n                    <RangeSliderThumb boxSize={6} index={1} />\n                </RangeSlider>\n                </div>\n\n\n\n\n            </div>\n\n\n        </div>\n    );\n\n}\n\n\nexport default TokenView;","\n\nexport const dateFromTimeStamp = (timestamp : number) => {\n    const date = new Date(timestamp * 1000)\n    const month = parseInt(date.getMonth().toString()) + 1;\n    return date.getDate() + '-' + month + '-' + date.getFullYear()\n}","import {getTokenPrice} from \"./tokenService\";\nimport Moralis from \"moralis\";\n\n\nexport const getTopGainers = async () => {\n    const TokenPrice = Moralis.Object.extend(\"Token1Day\")\n    const query = new Moralis.Query(TokenPrice);\n    query.select(\"pctChange\", \"id\", \"timeStamp\",\"exchange\", \"symbol\");\n    const currentDate = new Date();\n    const date = new Date(currentDate.getFullYear(), currentDate.getMonth(), currentDate.getDate() -2, 22, 0,0,0).getTime() / 1000;\n    // console.log(\"Checking prices greater than \",date);\n    query.greaterThanOrEqualTo(\"timeStamp\", date);\n    query.descending(\"pctChange\");\n    const results = await query.find();\n    const gainers = results.map((r)=>{\n        return {pctChange: r.get(\"pctChange\"), symbol: r.get(\"symbol\")}\n    })\n\n    return gainers.slice(0,5);\n}\n\n\nexport const getTopLosers = async () => {\n    const TokenPrice = Moralis.Object.extend(\"Token1Day\")\n    const query = new Moralis.Query(TokenPrice);\n    query.select(\"pctChange\", \"id\", \"timeStamp\",\"exchange\", \"symbol\");\n    const currentDate = new Date();\n    const date = new Date(currentDate.getFullYear(), currentDate.getMonth(), currentDate.getDate() -2, 22, 0,0,0).getTime() / 1000;\n    // console.log(\"Checking prices greater than \",date);\n    query.greaterThanOrEqualTo(\"timeStamp\", date);\n    query.ascending(\"pctChange\");\n    const results = await query.find();\n    const gainers = results.map((r)=>{\n        return {pctChange: r.get(\"pctChange\"), symbol: r.get(\"symbol\")}\n    })\n\n    return gainers.slice(0,5);\n}\n\n\nexport const getTopMCap = async () => {\n    const TokenPrice = Moralis.Object.extend(\"Token1Hour\")\n    const query = new Moralis.Query(TokenPrice);\n\n    query.select(\"marketCap\", \"id\", \"timeStamp\",\"exchange\", \"symbol\");\n    const currentDate = new Date();\n    const date = new Date(currentDate.getFullYear(), currentDate.getMonth(), currentDate.getDate(), currentDate.getHours() -4, 0,0,0).getTime() / 1000;\n    // console.log(\"Checking prices greater than \",date);\n    query.greaterThanOrEqualTo(\"timeStamp\", date);\n    query.descending(\"marketCap\");\n    const results = await query.find();\n    const gainers = results.map((r)=>{\n        return {marketCap: r.get(\"marketCap\"), symbol: r.get(\"symbol\")}\n    })\n    const top5 = gainers.slice(0,5);\n    return top5.map((t:any)=> {\n        return{'marketCap':(t.marketCap/(10**9)).toFixed(3), symbol: t.symbol\n    }\n    });\n}\n\n\nexport const get24HourPercentageChange =  async (address:string | undefined) => {\n\n    const TokenPrice = Moralis.Object.extend(\"Token1Day\")\n    const query = new Moralis.Query(TokenPrice);\n\n    query.select(\"createdAt\",\"timeStamp\",\"exchange\", \"symbol\", \"pctChange\");\n\n    query.equalTo(\"address\", address);\n    query.descending(\"timeStamp\");\n    query.limit(5000);\n    const result = await query.find();\n    console.log(\"Result has timestamp: \", result[0]?.get(\"timeStamp\"));\n    return result[0]?.get(\"pctChange\").toFixed(2);\n\n}","import {VStack} from \"@chakra-ui/react\";\nimport {FontAwesomeIcon} from \"@fortawesome/react-fontawesome\";\nimport {faFileDownload} from \"@fortawesome/free-solid-svg-icons\";\nimport {ColorPalette} from \"../styles/color_palette\";\nimport React from \"react\";\n\n\nconst ExportIcon = (props: any) => {\n\n    return ( <VStack style={{justifyContent:'center'}}>\n        <FontAwesomeIcon icon={faFileDownload} size=\"lg\" style={{float:'right', color:ColorPalette.highlight}}/>\n        <span style={{fontSize:'0.6em'}}>Export data</span>\n    </VStack>)\n\n}\n\n\nexport default ExportIcon;","import React, {useEffect, useState} from 'react';\nimport {getTokenList, getTokenPrice} from \"../../services/tokenService\";\nimport {background, Table, Tbody, Td, Th, Thead, Tr} from \"@chakra-ui/react\";\nimport {useNavigate} from \"react-router-dom\";\nimport Title from \"./Title\";\n\nfunction List(props: any)  {\n\n    const [entityList, setEntityList] = useState<any>(0)\n\n    useEffect (()=> {\n        props.getter()\n            .then((entities : any)=>{\n                console.log(\"Entities: \", entities);\n                setEntityList(entities)\n            });\n    },[])\n\n\n    return (\n        <div>\n            {props.title && (<Title title={props.title}/>)}\n            {entityList.length>0 &&\n            <EntityList tableStyle={props.tableStyle} entityList={entityList} entityProps={props.entityProps} noHead={props.noHead}/>\n            }\n        </div>\n    );\n}\n\n\nfunction EntityList(props: any) {\n\n\n    const navigate = useNavigate();\n\n    const [selected, setSelected] = useState<number | null>(null);\n\n    const handleHover = (e: any, idx: number) => {\n        setSelected(idx);\n    }\n\n\n    return(<Table style={{...props.tableStyle}} variant='simple'>\n        {!props.noHead && (\n            <Thead>\n                <Tr>\n                    {props.entityProps.map((ep:any, idx:number)=> {\n                        return(<Th key={idx}>{ep.name}</Th>)\n                    })}\n                </Tr>\n            </Thead>\n        )}\n        <Tbody>\n            {props.entityList.map((entity: any, idx: number)=> {\n                return(<Tr key={idx} style={selected==idx?{backgroundColor:'#FFB6C1', borderRadius:\"10px\", cursor:'pointer'}:{}}\n                           onMouseEnter={(e)=> handleHover(e, idx)} onMouseLeave={()=> setSelected(null)} >\n                    {props.imageProp && <img src={entity[props.imageProp]}/>}\n\n                    {props.entityProps.map((ep:any,i:number)=> {\n                        return(<Th key={i}>{ep.postProcess?ep.postProcess(entity[ep.value]):entity[ep.value]}</Th>)\n                    })}\n                </Tr>)\n            })}\n        </Tbody>\n\n    </Table>)\n}\n\n\nexport default List;","import List from \"../genericComponents/List\";\nimport {ColorPalette} from \"../styles/color_palette\";\nimport {getTopGainers} from \"../../services/dashboardService\";\n\n\nexport function Gainers(props:any) {\n// ,borderWidth:1, borderStyle:'solid',borderColor:'grey', borderRadius:20\n    return(<div style={{...props.style}}>\n        <div style={{width:'100%', backgroundColor:ColorPalette.secondaryColor}}>\n        {/*<h3 style={{margin:10}}>Gainers</h3>*/}\n        </div>\n            <List title=\"Gainers\" getter={getTopGainers} entityProps={[{name:\"Symbol\",value:\"symbol\"},{name:\"% Change\", value: \"pctChange\", postProcess:(a:any)=>(a*100).toFixed(2)+'%'}]}/>\n\n\n    </div>)\n\n}","import {ColorPalette} from \"../styles/color_palette\";\nimport List from \"../genericComponents/List\";\nimport {getTopGainers, getTopLosers} from \"../../services/dashboardService\";\n\nexport function Losers(props:any) {\n\n    return(<div style={{...props.style}}>\n\n    <List title=\"Losers\" getter={getTopLosers} entityProps={[{name:\"Symbol\",value:\"symbol\"},{name:\"% Change\", value: \"pctChange\", postProcess:(a:any)=>(a*100).toFixed(2)+'%'}]}/>\n\n\n    </div>)\n\n}","\nimport React, {useEffect, useRef, useState} from \"react\";\nimport * as d3 from \"d3\";\nimport {ColorPalette} from \"../../styles/color_palette\";\nimport './pieChartStyles.css';\n\n\n\nconst PieChart = ({data}:any)=> {\n\n\n    useEffect(()=>{\n        buildPieChart2();\n\n    },[data])\n\n    const buildPieChart2 = () => {\n        var width = 250,\n            height = 250,\n            radius = Math.min(width, height) / 2;\n        var divNode = d3.select(\"body\").node();\n        var outerRadius = radius - 10,\n            innerRadius = radius - 80;\n\n        var color : any = d3.scaleOrdinal().range([ColorPalette.mainColor, ColorPalette.red, ColorPalette.secondaryColor, ColorPalette.highlight, ColorPalette.green]);//Constructs a new ordinal scale with an empty domain and the specified range. If a range is not specified, it defaults to the empty array; an ordinal scale always returns undefined until a non-empty range is defined.\n\n\n        //add svg with margin !important\n        //this is svg is actually group\n        var svg = d3.select(\"#diagram\").append(\"svg\")\n            .attr(\"width\",width)\n            .attr(\"height\",height)\n            .append(\"g\")  //add group to leave margin for axis\n            .attr(\"transform\",\"translate(\"+width/2+\",\"+height/2+\")\");\n\n\n        //the code above should be same\n        if(data === undefined)\n            return;\n        var dataset : any = data;\n\n        // //arc to draw the chart. pie to generate the data for chart from the input\n        // var donutWidth = 40;\n        // var arc : any = d3.arc().outerRadius(radius).innerRadius(radius-donutWidth);//to generate the chart\n        // var pie = d3.pie()\n        //     .value(function(d:any){return d.percentage;});//sort the value to show from the 12 0'clcok\n        //\n\n        var arc:any = d3.arc()\n            .outerRadius(radius - 10)\n            .innerRadius(radius - 60);\n\n        console.log(\"Arc: \", arc);\n\n        var pie = d3.pie()\n            .sort(null)\n            .value(function(d:any) { return d.percentage; });\n\n        d3.select(\"#chart\").append(\"div\")\n            .attr(\"id\",\"mainPie\")\n            .attr(\"class\",\"pieBox\");\n\n        var svg = d3.select(\"#mainPie\").append(\"svg\")\n            .attr(\"width\", width)\n            .attr(\"height\", height)\n            .append(\"g\")\n            .attr(\"transform\", \"translate(\" + width / 2 + \",\" + height / 2 + \")\");\n\n\n\n        var defs = svg.append(\"defs\");\n        var filter = defs.append(\"filter\")\n            .attr(\"id\", \"drop-shadow\")\n            .attr(\"height\",\"130%\");\n\n        filter.append(\"feGaussianBlur\")\n            .attr(\"in\",\"SourceAlpha\")\n            .attr(\"stdDeviation\", 3)\n            .attr(\"result\", \"blur\");\n\n        filter.append(\"feOffset\")\n            .attr(\"in\", \"blur\")\n            .attr(\"dx\", 3)\n            .attr(\"dy\", 3)\n            .attr(\"result\", \"offsetBlur\");\n        var feMerge = filter.append(\"feMerge\");\n\n        feMerge.append(\"feMergeNode\")\n            .attr(\"in\", \"offsetBlur\")\n        feMerge.append(\"feMergeNode\")\n            .attr(\"in\", \"SourceGraphic\");\n\n        var g = svg.selectAll(\".arc\")\n            .data(pie(data))\n            .enter().append(\"g\")\n            .attr(\"class\", \"arc\");\n\n\n        // Handling hovers\n        var paths = g.append(\"path\")\n            .attr(\"d\",arc)\n            // @ts-ignore\n            .style(\"fill\",function(d:any){return color(d.data);})\n            .on(\"mouseover\", function(d:any, i:any) {\n                console.log(\"Data is: \", d);\n                console.log(\"Index is: \", i);\n                d3.select(this)\n                    .attr(\"stroke\",\"#fff\")\n                    .attr(\"stroke-width\",\"2px\")\n                    .style(\"filter\", \"url(#drop-shadow)\");\n                d3.select(this)\n                    .transition()\n                    .duration(500)\n                    // .ease('elastic')\n                    .attr('transform',function(d:any){\n                        var dist = 1;\n                        d.midAngle = ((d.endAngle - d.startAngle)/2) + d.startAngle;\n                        var x = Math.sin(d.midAngle) * dist;\n                        var y = Math.cos(d.midAngle) * dist;\n                        return 'translate(' + x + ',' + y + ')';\n                    });\n\n\n                svg.append('circle')\n                    .attr('id','circle')\n                    .attr('fill','#42A5F5')\n                    .attr('r','62')\n\n                svg.append('text')\n                    .attr('id', 'circle-text')\n                    .style('fill', '#F2F2F2')\n                    .style(\"font-size\", \"20px\")\n                    .style(\"font-weight\", \"bold\")\n                    .attr(\"transform\", \"translate(0,\" + 20 + \")\")\n                    .attr(\"text-anchor\", \"middle\")\n                    .html(`${i.data.symbol} <br/> ${i.data.percentage}%`);\n\n\n            })\n            .on(\"mouseout\", function(d){\n                d3.select(this)\n                    .attr(\"stroke\",\"none\")\n                    .style(\"filter\",\"none\");\n                d3.select(this)\n                    .transition()\n                    .duration(500)\n                    // .ease('bounce')\n                    .attr('transform','translate(0,0)');\n\n                // d3.select(\"#mainTooltip\").style(\"display\", 'none');\n                d3.select('circle').remove();\n                d3.select('#circle-text').remove();\n                // d3.select('#circle').style(\"display\",\"hidden\");\n\n            });\n\n\n        //add legend to the donut chart\n\n        // var legendSize = 15;\n        // var legendSpacing = 2;\n        // var legend = svg.selectAll(\".legend\")\n        //     .data(color.domain())\n        //     .enter()\n        //     .append(\"g\")\n        //     .attr(\"transform\",function(d,i){\n        //         var legendH = color.domain().length*(legendSize+legendSpacing);//total height of legends\n        //         var legendY = i*(legendSize+legendSpacing) - legendH/2;//\n        //         var legendX = -legendSize;\n        //         return \"translate(\"+legendX+\",\"+legendY+\")\";\n        //     });\n        // legend.append(\"rect\")\n        //     .attr(\"width\",legendSize)\n        //     .attr(\"height\",legendSize)\n        //     .attr(\"fill\",color)\n        //     .attr(\"stroke\",color);\n        // legend.append(\"text\")\n        //     .text(function(d:any){return d[0];})\n        //     .attr('x', legendSize + legendSpacing)\n        //     .attr('y', legendSize - legendSpacing);\n\n        //add  tooltip to paths\n        var tooltip = d3.select(\"#diagram\").append(\"div\").attr(\"class\",\"tooltip\");\n        tooltip.append(\"div\").attr(\"class\",\"name\");\n        tooltip.append(\"div\").attr(\"class\",\"count\");\n        tooltip.append(\"div\").attr(\"class\",\"percentage\");\n\n\n        // svg.on(\"mouseover\",function(d:any){\n        //     var total = d3.sum(dataset,function(dd:any){return dd[1];});\n        //     console.log(\"d is: \", d);\n        //     var percent = Math.round(1000 * d.data[1] / total) / 10;\n        //     tooltip.select(\".name\").html(d.data[0]);\n        //     tooltip.select(\".count\").html(d.data[1]);\n        //     tooltip.select(\".percentage\").html(percent + '%');\n        //     tooltip.style(\"display\", \"block\");\n        // });\n        // paths.on(\"mouseout\",function(d){\n        //     tooltip.style(\"display\", \"none\");\n        // });\n\n\n    }\n\n\n    const buildPieChart = () => {\n        var data :any = [\n            {\n                \"str_lab\": \"Jon\",\n                \"num\": 100\n            },\n            {\n                \"str_lab\": \"Shaggydog\",\n                \"num\": 44\n            },\n            {\n                \"str_lab\": \"Ghost\",\n                \"num\": 215\n            },\n            {\n                \"str_lab\": \"Nymeria\",\n                \"num\": 385\n            },\n            {\n                \"str_lab\": \"Summer\",\n                \"num\": 141\n            },\n            {\n                \"str_lab\": \"Grey wind\",\n                \"num\": 340\n            }\n        ];\n\n        var width = 300,\n            height = 300,\n            radius = Math.min(width, height) / 2;\n        var divNode = d3.select(\"body\").node();\n        var outerRadius = radius - 10,\n            innerRadius = radius - 80;\n        var color = d3.scaleOrdinal()\n            .range([\"#2E7D32\",\"#53856D\",\"#FF7043\", \"#1FDA9A\", \"#28ABE3\", \"#DF514C\", \"#DAE9F7\"]);\n\n        var arc:any = d3.arc()\n            .outerRadius(radius - 10)\n            .innerRadius(radius - 80);\n\n        console.log(\"Arc: \", arc);\n\n        var pie = d3.pie()\n            .sort(null)\n            .value(function(d:any) { return d.num; });\n\n        d3.select(\"#chart\").append(\"div\")\n            .attr(\"id\",\"mainPie\")\n            .attr(\"class\",\"pieBox\");\n\n        var svg = d3.select(\"#mainPie\").append(\"svg\")\n            .attr(\"width\", width)\n            .attr(\"height\", height)\n            .append(\"g\")\n            .attr(\"transform\", \"translate(\" + width / 2 + \",\" + height / 2 + \")\");\n\n        var defs = svg.append(\"defs\");\n        var filter = defs.append(\"filter\")\n            .attr(\"id\", \"drop-shadow\")\n            .attr(\"height\",\"130%\");\n\n        filter.append(\"feGaussianBlur\")\n            .attr(\"in\",\"SourceAlpha\")\n            .attr(\"stdDeviation\", 3)\n            .attr(\"result\", \"blur\");\n\n        filter.append(\"feOffset\")\n            .attr(\"in\", \"blur\")\n            .attr(\"dx\", 3)\n            .attr(\"dy\", 3)\n            .attr(\"result\", \"offsetBlur\");\n        var feMerge = filter.append(\"feMerge\");\n\n        feMerge.append(\"feMergeNode\")\n            .attr(\"in\", \"offsetBlur\")\n        feMerge.append(\"feMergeNode\")\n            .attr(\"in\", \"SourceGraphic\");\n\n        var g = svg.selectAll(\".arc\")\n            .data(pie(data))\n            .enter().append(\"g\")\n            .attr(\"class\", \"arc\");\n\n        g.append(\"path\")\n            .attr(\"d\", arc)\n            .style(\"fill\", \"blue\")\n            .on(\"mousemove\", function(d) {\n                d3.select(this)\n                    .attr(\"stroke\",\"#fff\")\n                    .attr(\"stroke-width\",\"2px\")\n                    .style(\"filter\", \"url(#drop-shadow)\");\n                d3.select(this)\n                    .transition()\n                    .duration(500)\n                    // .ease('elastic')\n                    .attr('transform',function(d:any){\n                        var dist = 1;\n                        d.midAngle = ((d.endAngle - d.startAngle)/2) + d.startAngle;\n                        var x = Math.sin(d.midAngle) * dist;\n                        var y = Math.cos(d.midAngle) * dist;\n                        return 'translate(' + x + ',' + y + ')';\n                    });\n                var mousePos = d3.pointer(divNode);\n                d3.select(\"#mainTooltip\")\n                    .style(\"left\", mousePos[0] - 40 + \"px\")\n                    .style(\"top\", mousePos[1] - 70 + \"px\")\n                    .select(\"#value\")\n                    .attr(\"text-anchor\", \"middle\")\n                    // .html(d.data.str_lab + \"<br />\" + d.data.num);\n                console.log(\"d is: \", d);\n                d3.select(\"#mainTooltip\").classed(\"hidden\", false);\n            })\n            .on(\"mouseout\", function(d){\n                d3.select(this)\n                    .attr(\"stroke\",\"none\")\n                    .style(\"filter\",\"none\");\n                d3.select(this)\n                    .transition()\n                    .duration(500)\n                    // .ease('bounce')\n                    .attr('transform','translate(0,0)');\n\n                d3.select(\"#mainTooltip\").classed(\"hidden\", true);\n            });\n        var centerSvg = svg.append('circle')\n            .attr('fill','#42A5F5')\n            .attr('r','62');\n\n        svg.append('text')\n            .style('fill', '#F2F2F2')\n            .style(\"font-size\", \"64px\")\n            .style(\"font-weight\", \"bold\")\n            .attr(\"transform\", \"translate(0,\" + 20 + \")\")\n            .attr(\"text-anchor\", \"middle\")\n            .html(data.length.toString());\n\n\n    }\n\n    return(<>\n        <div id=\"chart\"></div>\n        <div id=\"mainTooltip\" className=\"hidden\">\n            <p><span id=\"value\"></span></p>\n        </div>\n\n\n    </>)\n\n}\n\nexport default PieChart;","import List from \"../genericComponents/List\";\nimport {ColorPalette} from \"../styles/color_palette\";\nimport {getTopMCap} from \"../../services/dashboardService\";\nimport {SetStateAction, useEffect, useState} from \"react\";\nimport PieChart from \"../charts/pieChart/PieChart\";\nimport {Grid, GridItem, HStack} from \"@chakra-ui/react\";\nimport Title from \"../genericComponents/Title\";\nimport BarRaceChart from \"../charts/barRaceChart/BarRaceChart\";\n\n\nexport function MarketCap(props: any) {\n\n    const [pieChartData, setPieChartData] = useState<any[]>([]);\n\n    useEffect(() => {\n\n        getTopMCap()\n            .then((allTokens) => {\n                const percentages: any = [];\n                console.log(\"All tokens: \", allTokens);\n                const totalMCap = allTokens.map(i=>parseFloat(i.marketCap)).reduce((a,b : any) => a + b,0)\n                console.log(\"Total marketcap = \", totalMCap);\n                allTokens.map((token)=>{\n                    percentages.push({\"symbol\": token.symbol, \"percentage\":(parseFloat(token.marketCap)/totalMCap*100).toFixed(0)})\n                })\n                setPieChartData(percentages);\n            })\n    },[])\n\n\n    return(<div style={{...props.style}}>\n        <Title title=\"Market Cap (Top 5)\"/>\n\n            <HStack spacing={\"5%\"}>\n                {pieChartData.length > 0 && (<PieChart data={pieChartData}/>)}\n                <List getter={getTopMCap} tableStyle={{width:300}}  entityProps={[{name:\"Symbol\",value:\"symbol\"},{name:\"M Cap (B$)\", value: \"marketCap\"}]}/>\n            </HStack>\n    </div>)\n\n}","import React, {useEffect, useRef, useState} from \"react\";\nimport * as d3 from \"d3\";\nimport {transition} from \"d3-transition\";\nimport {select, selectAll} from \"d3-selection\";\nimport {axisBottom, axisLeft} from \"d3\";\nimport {getTokenPriceHistoryDB} from \"../../../services/tokenService\";\nimport {ColorPalette} from \"../../styles/color_palette\";\n\n\nconst MiniChart = ({data, width, height,color}:any) => {\n\n    const svgRef = useRef<any>();\n\n    const setupData = (svg:any, line:any, options: any) => {\n        // Setup data\n        svg\n            .append('path')\n            .datum(data.map((r:any)=>r.price))\n            .attr('id', 'line')\n            .attr('stroke', options.strokeColor?options.strokeColor:'black')\n            .attr('stroke-width', 2)\n            .attr('fill', 'none')\n            .attr('d', line);\n    }\n\n    const setupLinearGraph = () => {\n\n        // Setup svg\n        if(data == undefined) {\n            return;\n        }\n\n        const svg = d3.select(svgRef.current)\n            .attr('width', width)\n            .attr('height', height)\n            .style('background', 'white')\n            .style('margin-left', '50')\n            .style('overflow', 'visible');\n\n        // Setup scaling\n        const xScale: any = d3.scaleLinear()\n            .domain([0, data.length]) // x ticks\n            .range([0, width]) // x width\n\n\n\n        const yMin = Math.round(data.map((r:any)=>r.price).reduce((a:number,b:number) => Math.min(a,b)));\n        const yMax = Math.ceil(data.map((r:any)=>r.price).reduce((a:number,b: number)=> Math.max(a,b)));\n        console.log(\"Y max is: \", yMax);\n        console.log(\"Y min is: \", yMin);\n        const yScale: any = d3.scaleLinear()\n            .domain([yMin, yMax])\n            .range([height, 0])\n\n        // Setting up line\n        const line = d3.line()\n            .x((d, i)=> xScale(i))\n            .y(yScale)\n            .curve(d3.curveLinear)\n\n\n        const dataOptions = {strokeColor: color}\n        setupData(svg,line, dataOptions);\n        return line;\n    }\n\n\n    useEffect(()=>{\n        console.log(\"COLOR is: \", color);\n\n                setupLinearGraph();\n    },[])\n\n\n    return (\n            <svg style={{zIndex:-1}} ref={svgRef}>\n            </svg>\n\n    )\n\n};\n\nexport default MiniChart;","import MiniChart from \"./MiniChart\";\nimport {useEffect, useState} from \"react\";\nimport {getTokenByAddress, getTokenPriceHistoryDB} from \"../../../services/tokenService\";\nimport {Box, HStack} from \"@chakra-ui/react\";\nimport AvadaSpinner from \"../../genericComponents/AvadaSpinner\";\nimport {ColorPalette} from \"../../styles/color_palette\";\nimport {useNavigate} from \"react-router-dom\";\nimport {get24HourPercentageChange} from \"../../../services/dashboardService\";\n\n\nexport default function     MiniChartContainer ({address, width, height}:any) {\n\n    const navigate = useNavigate();\n\n\n    const [data, setData] = useState<any>(null);\n\n    const [tokenInfo, setTokenInfo] = useState<any>(null);\n    const [isLoading, setIsLoading] = useState<boolean>(false);\n\n    const [borderColor, setBorderColor] = useState('gray.200')\n\n    const [pctChange, setPctChange] = useState(0);\n\n    const [plotColor, setPlotColor] = useState(\"\");\n\n    useEffect(()=>{\n        setIsLoading(true);\n        // get24HourPercentageChange(address)\n        //     .then((pct)=> {\n        //         setPctChange(pct)\n        //         setPlotColor(pct>0?ColorPalette.green:ColorPalette.red)\n        //     });\n\n\n        getTokenByAddress(address)\n            .then((t:any)=>setTokenInfo(t));\n\n        getTokenPriceHistoryDB(address, \"Token1Hour\", 1)\n            .then((d)=> {\n                setData(d.slice(d.length -24, d.length -1));\n                setIsLoading(false);\n            })\n\n    },[])\n\n\n    useEffect(()=>{\n        if(data) {\n\n            setPctChange((( data[data.length -1].price - data[0].price) / data[0].price))\n            console.log(\"Pctgchange is: \", pctChange);\n            setPlotColor(pctChange>0?ColorPalette.green:ColorPalette.red)\n        }\n    },[data])\n\n\n    const getPercentage = () => {\n\n        // Change this to be last 24 hour percentage\n        return parseFloat((pctChange * 100).toFixed(2));\n    }\n\n    return (<div onMouseEnter={()=>setBorderColor(pctChange > 0 ? ColorPalette.green : ColorPalette.red)} onMouseLeave={()=>setBorderColor('gray.200')}>\n\n            {isLoading && (<Box border=\"1px\" borderColor={borderColor} borderRadius={30} padding={5} >\n                <AvadaSpinner/>\n            </Box>)}\n\n        {(data && plotColor) && (\n            <Box border=\"2px\" borderColor={borderColor} borderRadius={30} padding={5} onClick={()=>navigate(`/token/${address}`)}>\n                {tokenInfo && (<><HStack>\n                        <img style={{width:30, height:30}} src={tokenInfo.logoUrl}/>\n                        <span>{tokenInfo.symbol}</span>\n                        {pctChange!==0 && (<span style={{marginRight: 30, color: (getPercentage() < 0)? ColorPalette.red: ColorPalette.green}}>{getPercentage() + '% (24h)'}</span>)}\n                    </HStack>\n                        {data[data.length-1] && <span style={{margin:40}}>{'$ ' + data[data.length-1].price.toFixed(2)}</span>}\n\n                    </>\n                )}\n                {(data.length >0 && plotColor) && <div style={{width:width, height:height}}><MiniChart data={data}  width={width} height={height} color={plotColor}/></div>}\n\n\n            </Box>\n        )}\n        </div>\n    )\n\n}","import {Gainers} from \"./Gainers\";\nimport Title from \"../genericComponents/Title\";\nimport {Losers} from \"./Losers\";\nimport {useEffect, useState} from \"react\";\nimport {MarketCap} from \"./MarketCap\";\nimport {Box, Grid, HStack, VStack} from \"@chakra-ui/react\";\nimport MiniChart from \"../charts/miniChart/MiniChart\";\nimport MiniChartContainer from \"../charts/miniChart/MiniChartContainer\";\nimport PieChart from \"../charts/pieChart/PieChart\";\nimport {getTopMCap} from \"../../services/dashboardService\";\nimport BarRaceChart from \"../charts/barRaceChart/BarRaceChart\"\n\n\nexport function Dashboard(props:any) {\n\n\n    return(<div style={{...props.style}}>\n        <Title title=\"Dashboard\" hasInfo/>\n\n        <HStack  spacing={10}>\n\n            {/*<BarRaceChart/>*/}\n                <MiniChartContainer address=\"0x50b7545627a5162f82a992c33b87adc75187b218\"   width={300} height={150}/>\n                <MiniChartContainer address=\"0x49d5c2bdffac6ce2bfdb6640f4f80f226bc10bab\"   width={300} height={150}/>\n                <MiniChartContainer address=\"0xb31f66aa3c1e785363f0875a1b74e27b85fd66c7\"  width={300} height={150}/>\n                <MiniChartContainer address=\"0xb54f16fb19478766a268f172c9480f8da1a7c9c3\"  width={300} height={150}/>\n        </HStack>\n\n        <HStack style={{marginTop:50}}>\n            <MarketCap style={{alignItems:'center', marginRight:50}}/>\n            <Gainers style={{width:400,  alignItems:'center', marginLeft:50}}/>\n            <Losers style={{width:400,  alignItems:'center', margin:20}}/>\n        </HStack>\n    </div>)\n}","import {Flex, Icon, Link, Menu, MenuButton, MenuList, Text} from \"@chakra-ui/react\";\nimport {Link as ReactLink} from 'react-router-dom';\nimport dashboard from \"../../images/dashboard.png\";\nimport {NavHoverBox} from \"./NavHoverBox\";\nimport React, {useState} from \"react\";\nimport {ColorPalette} from \"../styles/color_palette\";\nimport {deletePopupMessage, renderPopupMessage} from \"./PopupMessage\";\nimport  { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { faCheckSquare, faInfoCircle } from '@fortawesome/free-solid-svg-icons'\n\nexport function NavItem({navSize, icon, title, route, active, style,setActiveMenu, idx, status}:any) {\n\n    const [hoverOject, setHoverObject] = useState<any>(null);\n    const [popupTimerOn, setPopupTimerOn] = useState<boolean>(true);\n    const [popupActivated, setPopupActivated] = useState(false);\n    const [showInfo, setShowInfo] = useState<boolean>(false);\n\n\n\n    // @ts-ignore\n    // @ts-ignore\n    return(\n        <Flex\n            mt={30}\n            flexDir=\"column\"\n            w=\"100%\"\n            alignItems={navSize==\"small\"? \"center\" : \"flex-start\"}\n            backgroundColor={style.backgroundColor}\n            opacity={status =='active'? 1: 0.6}\n        >\n            <Menu placement =\"right\">\n                <Link\n                    as={ReactLink}\n                    to={route}\n                    p={3}\n                    borderRadius={8}\n                    _hover={status == 'active' ? {backgroundColor:ColorPalette.highlight}:{backgroundColor:ColorPalette.mainColor}}\n                    w={navSize == 'large'?'100%':''}\n                    onClick={()=>{status=='active'?setActiveMenu(idx):console.log(\"Inactive\")}}\n\n                >\n\n                    <MenuButton w=\"100%\" ml={3}>\n                        <Flex style={{alignItems:'center'}}>\n                            {/*<Icon as={icon} fontSize=\"xl\" color={active ? '#FFB6C1' : \"gray.500\"}/>*/}\n                            <img style={{width:40, height:40}} src={icon}/>\n                            <Text color={ColorPalette.navFontColor} fontSize='xl' ml={5} display={navSize=='small'?'none':'flex'}>{title}</Text>\n                        </Flex>\n                    </MenuButton>\n\n\n                </Link>\n\n            </Menu>\n\n\n\n        </Flex>\n    )\n\n\n}","export default __webpack_public_path__ + \"static/media/tokens.01297ec6.png\";","export default __webpack_public_path__ + \"static/media/coins.985572b0.png\";","export default __webpack_public_path__ + \"static/media/pools.ebbbad37.png\";","export default __webpack_public_path__ + \"static/media/charts.4404929f.png\";","export default __webpack_public_path__ + \"static/media/whales.26c92c8d.png\";","export default __webpack_public_path__ + \"static/media/mempools.6a0f1fd6.png\";","export default __webpack_public_path__ + \"static/media/bridges.58d7d2cb.png\";","export default __webpack_public_path__ + \"static/media/logo_2.fe60bd52.png\";","import {Avatar, Divider, Flex, Grid, GridItem, Heading, HStack, IconButton, Text} from \"@chakra-ui/react\";\nimport {FiMenu} from \"react-icons/all\";\nimport React, {useEffect, useState} from \"react\";\nimport {NavItem} from \"./NavItem\";\nimport dashboard from '../../images/dashboard.png';\nimport tokens from '../../images/tokens.png';\nimport coins from '../../images/coins.png';\nimport pools from '../../images/pools.png';\nimport charts from '../../images/charts.png';\nimport whales from '../../images/whales.png';\nimport mempools from '../../images/mempools.png';\nimport bridges from '../../images/bridges.png';\nimport logo_1 from '../../images/logo_1.png';\nimport logo_2 from '../../images/logo_2.png';\n\nimport {ColorPalette} from \"../styles/color_palette\";\n\n\nconst Menus = [\n    {title:\"Dashboard\" ,route:\"/\", icon:charts, status: 'active'},\n    {title:\"Tokens\" ,route:\"/tokens\", icon:tokens, status: 'active'},\n    {title:\"Multiple Tokens\" ,route:\"/multiTokens\", icon:coins, status: 'active'},\n    {title:\"Pools\" ,route:\"/pools\", icon:pools, status: 'active'},\n    {title:\"Whales\", route:\"/whales\", icon:whales, status: 'inactive'},\n    {title:\"MemPools\", route:\"/mempools\", icon:mempools, status: 'inactive'},\n    {title:\"Bridges\", route:\"/bridges\", icon:bridges, status: 'inactive'},\n\n\n]\n\n\nexport function Sidebar({navSize, setNavSize}:any) {\n\n    const [activeMenu, setActiveMenu] = useState(0);\n\n\n    useEffect(()=>{\n        console.log(\"Active menu is: \", activeMenu);\n    }, [activeMenu])\n\n\n    return(\n        <Flex\n            // pos=\"absolute\"\n            display=\"flex\"\n            h=\"100%\"\n            marginTop=\"0\"\n            // boxShadow=\"0 4px 12px 0 rgba(0,0,0,0.05)\"\n            borderRadius={navSize=='small'?\"0px 5px 5px 0px\":\"0px 5px 5px 0px\"}\n            backgroundColor={ColorPalette.mainColor}\n            w={navSize=='small'?\"100px\":\"250px\"}\n            flexDir=\"column\"\n            justifyContent=\"space-between\"\n            zIndex={999}\n        >\n\n            <Flex\n                // p=\"5%\"\n                flexDir=\"column\"\n                alignItems=\"flex-start\"\n                as=\"nav\"\n            >\n              <HStack spacing='8px' margin={5}>\n                  {/*<Text display={ navSize=='large'?'flex':'none'} fontWeight={'bold'} fontSize='2xl' color={ColorPalette.navFontColor} ml={10} mt={5}>AVALYTICS</Text>*/}\n                  <div style={{width:220, height:60, paddingTop:20, paddingRight:20}} >\n                    <img src={logo_2}/>\n                  </div>\n              </HStack>\n\n                {Menus.map((m:any, idx: number) => {\n                    return(<NavItem idx={idx} style={activeMenu==idx?{borderColor:ColorPalette.red, borderStyle:'solid', borderWidth:1, borderRadius: 5}:{}}\n                                    setActiveMenu={setActiveMenu}\n                                    navSize={navSize}\n                                    title={m.title}\n                                    route={m.route}\n                                    icon={m.icon}\n\n                                    status = {m.status}/>)\n                })}\n            </Flex>\n\n            <Flex\n                p=\"5%\"\n                flexDir=\"column\"\n                w=\"100%\"\n                alignItems=\"flex-start\"\n                mb={4}\n            >\n                {/*<Divider display={navSize=='small'? \"none\":\"flex\"}/>*/}\n                {/*<Flex mt={4} align=\"center\">*/}\n                {/*    <Avatar size=\"sm\"/>*/}\n                {/*    <Flex flexDir=\"column\" ml={4} display={navSize=='small'? \"none\":\"flex\"}>*/}\n                {/*        <Heading as=\"h3\" size=\"sm\">Renato</Heading>*/}\n                {/*        <Text color=\"gray\">Admin</Text>*/}\n                {/*    </Flex>*/}\n                {/*</Flex>*/}\n\n            </Flex>\n\n        </Flex>\n    )\n\n}","import * as d3 from \"d3\";\nimport {useEffect, useState} from \"react\";\nimport {Checkbox, HStack, Stack} from \"@chakra-ui/react\";\nimport {dateFromTimeStamp} from \"../../../utils/dateUtils\";\nimport {ColorPalette} from \"../../styles/color_palette\";\nimport {transition} from \"d3-transition\";\nimport {select} from \"d3-selection\";\n\n\nexport function HeatMap(props) {\n\n    const {data, tokensList} = props;\n\n\n    const [width, setWidth] = useState(0);\n    const [height, setHeight] = useState(0);\n    const [svg, setSvg] = useState();\n\n    // useEffect(()=>{\n    //     buildHeatMap();\n    // },[])\n\n\n    useEffect(()=>{\n        console.log(\"Updating with data points: \", data.length);\n\n        if(d3.selectAll(\"svg\")) {\n            d3.selectAll(\"svg\").remove();\n            d3.selectAll(\".tooltip\").remove();\n        }\n\n        const s = buildHeatMap();\n        setSvg(s);\n\n    },[data])\n\n\n    const buildHeatMap = () => {\n        const margin = {top: 20, right: 25, bottom: 20, left: 40},\n            width = 1200 - margin.left - margin.right,\n            height = 600 - margin.top - margin.bottom;\n\n        const svg = d3.select(\"#my_dataviz\")\n            .append(\"svg\")\n            .attr(\"width\", width + margin.left + margin.right)\n            .attr(\"height\", height + margin.top + margin.bottom)\n            .append(\"g\")\n            .attr(\"transform\", `translate(${margin.left}, ${margin.top})`);\n\n//Read the data\n\n\n        // Labels of row and columns -> unique identifier of the column called 'group' and 'variable'\n        const myGroups = Array.from(new Set(data.map(d => d.timestamp)))\n        const myVars = Array.from(new Set(data.map(d => d.symbol)))\n\n        // Build X scales and axis:\n        const x = d3.scaleBand()\n            .range([ 0, width ])\n            .domain(myGroups)\n            .padding(0.05);\n\n        // Build Y scales and axis:\n        const y = d3.scaleBand()\n            .range([ height, 0 ])\n            .domain(myVars)\n            .padding(0.05);\n\n        svg.append(\"g\")\n            .style(\"font-size\", 15)\n            .call(d3.axisLeft(y).tickSize(0))\n            .select(\".domain\").remove()\n\n        // Build color scale\n        const pctgColor = d3.scaleSequential()\n            .interpolator(d3.interpolate(ColorPalette.red,ColorPalette.green))\n            .domain([-0.1,0.1])\n\n        // create a tooltip\n        const tooltip = d3.select(\"#my_dataviz\")\n            .append(\"div\")\n            .style(\"opacity\", 0)\n            .attr(\"class\", \"tooltip\")\n            .style(\"background-color\", \"white\")\n            .style(\"border\", \"solid\")\n            .style(\"border-width\", \"2px\")\n            .style(\"border-radius\", \"5px\")\n            .style(\"padding\", \"5px\")\n\n        // Three function that change the tooltip when user hover / move / leave a cell\n        const mouseover = function(event,d) {\n            tooltip\n                .style(\"opacity\", 1)\n            d3.select(this)\n                .style(\"stroke\", \"black\")\n                .style(\"opacity\", 1)\n        }\n        const mousemove = function(event,d) {\n            tooltip\n                .html(d.symbol + ' changed ' +(d.pctChange * 100).toFixed(2)  + '% @ ' + dateFromTimeStamp(d.timestamp))\n                .style(\"position\", \"absolute\")\n                .style(\"left\", (event.clientX + 10) + \"px\")\n                .style(\"top\", (event.clientY - 60) + \"px\")\n\n        }\n        const mouseleave = function(event,d) {\n\n            tooltip\n                .style(\"opacity\", 0)\n            d3.select(this)\n                .style(\"stroke\", \"none\")\n                .style(\"opacity\", 0.8)\n        }\n\n        // add the squares\n        svg.selectAll()\n            .data(data, function(d) {return d.timestamp+':'+d.symbol;})\n            .join(\"rect\")\n            .attr(\"x\", function(d) { return x(d.timestamp) })\n            .attr(\"y\", function(d) { return y(d.symbol) })\n            .attr(\"rx\", 4)\n            .attr(\"ry\", 4)\n            .attr(\"width\", x.bandwidth() )\n            .attr(\"height\", y.bandwidth() )\n            .style(\"fill\", function(d) {\n                return pctgColor(d.pctChange);\n            })\n\n            .style(\"stroke-width\", 4)\n            .style(\"stroke\", \"none\")\n            .style(\"opacity\", 0.8)\n            .on(\"mouseover\", mouseover)\n            .on(\"mousemove\", mousemove)\n            .on(\"mouseleave\", mouseleave)\n\n        return svg;\n\n    }\n\n\n\n\n\n    return (<>\n\n        <div id=\"my_dataviz\" style={{width: 1000, height: 800}}/>\n\n    </>)\n\n\n}","import React from 'react';\nimport './BarRaceChart.css';\n\nfunction BarRaceChart() {\n\n\treturn (\n\t\t<div className='barRaceChart'>\n\t\t<iframe id='iframeId' src='https://flo.uri.sh/visualisation/8380876/embed' title='Interactive or visual content' className='flourish-embed-iframe' frameBorder='0' scrolling='no' sandbox='allow-same-origin allow-forms allow-scripts allow-downloads allow-popups allow-popups-to-escape-sandbox allow-top-navigation-by-user-activation'></iframe>\n\t\t<div id='divId'>\n\t\t\t{/*<a id='aId' className='flourish-credit' href='https://public.flourish.studio/visualisation/8380876/?utm_source=embed&utm_campaign=visualisation/8380876' target='_top'>*/}\n\t\t\t{/*\t<img alt='Made with Flourish' src='https://public.flourish.studio/resources/made_with_flourish.svg' /> */}\n\t\t\t{/*</a>*/}\n\t\t</div>\n\t\t</div>\n\n\t)\n}\n\nexport default BarRaceChart;\n","import {HeatMap} from \"./charts/heatmap/HeatMap\";\nimport React, {useEffect, useState} from \"react\";\nimport {fetchTokensForHeatMap, getTokenList, getTokenPriceHistoryDB} from \"../services/tokenService\";\nimport {\n    Avatar,\n    Flex,\n    HStack,\n    RangeSlider, RangeSliderFilledTrack, RangeSliderThumb, RangeSliderTrack,\n    Select,\n    Tab,\n    TabList,\n    TabPanel,\n    TabPanels,\n    Tabs,\n    VStack\n} from \"@chakra-ui/react\";\nimport AvadaSpinner from \"./genericComponents/AvadaSpinner\";\nimport {ColorPalette} from \"./styles/color_palette\";\nimport Title from \"./genericComponents/Title\";\nimport {Checkbox, CheckboxGroup} from '@chakra-ui/react'\nimport BarRaceChart from \"./charts/barRaceChart/BarRaceChart\";\nimport {dateFromTimeStamp} from \"../utils/dateUtils\";\n\nexport function MultipleTokens(props: any) {\n\n    const [tokenList, setTokenList] = useState<any[]>([]);\n    const [sliderStep, setSliderStep] = useState<number>(24 * 60 * 60);\n\n    const [tokenPrices, setTokenPrices] = useState<any[]>([]);\n    const [isLoading, setIsLoading] = useState(false);\n    const [initialOffset, setInitialOffset] = useState((Date.now() - 30 * 24 * 60 * 60 * 1000) / 1000); // 30 days in the past in seconds\n    const [startDate, setStartDate] = useState<any>(dateFromTimeStamp(initialOffset));\n    const [endDate, setEndDate] = useState<any>(dateFromTimeStamp(Date.now() / 1000));\n    const [endOffset, setEndOffset] = useState(Math.round(Date.now() / 1000));\n\n    const [activeTokens, setActiveTokens] = useState<any>([\"WBTC.e\", \"WETH.e\", \"WAVAX.e\", \"LINK.e\", \"TIME\", \"JOE\", \"AAVE.e\"]);\n\n\n    const fetchPctChanges = () => {\n        setIsLoading(true);\n        fetchTokensForHeatMap(\"Token1Day\", initialOffset, endOffset, activeTokens)\n            .then((tp) => {\n                setTokenPrices(tp.filter((t) => t.symbol != \"SUSHI.e\").sort((a, b) => {\n                    return (a.symbol > b.symbol ? -1 : 1)\n                }))\n                setIsLoading(false);\n                console.log(\"Token prices: \", tokenPrices);\n            });\n    }\n\n\n    useEffect(() => {\n        getTokenList()\n            .then(tl => setTokenList(tl))\n        setIsLoading(true);\n        fetchPctChanges();\n    }, [])\n\n\n    const handleCheckBoxChange = (e: any, idx: number) => {\n        const toAdd = e.target.checked;\n        if (toAdd) {\n            activeTokens.push(tokenList[idx].symbol);\n            setIsLoading(true);\n            fetchPctChanges();\n        } else {\n            const idxToRemove = activeTokens.indexOf(tokenList[idx].symbol);\n            activeTokens.splice(idxToRemove, 1);\n            const currentPrices = tokenPrices;\n            setTokenPrices(currentPrices.filter((tp) => tp.symbol != tokenList[idx].symbol));\n            // tokenPrices;\n        }\n    }\n\n    const handleSelectAll = (e: any) => {\n        console.log(\"After handleSelect: \", e.target.checked);\n        if (e.target.checked) {\n            setActiveTokens(tokenList.map((t) => t.symbol));\n            fetchPctChanges();\n        } else {\n            setActiveTokens([\"WBTC.e\", \"WETH.e\", \"WAVAX.e\", \"LINK.e\", \"TIME\", \"JOE\", \"AAVE.e\"])\n            fetchPctChanges();\n        }\n    }\n\n    const onDateDrag = (date: any) => {\n        setStartDate(dateFromTimeStamp(date[0]))\n        setEndDate(dateFromTimeStamp(date[1]))\n    }\n\n    const onChangeDate = (date: any) => {\n        setInitialOffset(date[0]);\n        setEndOffset(date[1]);\n        console.log(\"Fetch data again\");\n\n    }\n\n    useEffect(() => {\n        fetchPctChanges();\n    }, [initialOffset, endOffset])\n\n\n    const checkActiveTokens = (t: any) => {\n        return activeTokens.includes(t.symbol)\n    }\n\n\n    return (\n        <div>\n\n            <div style={{...props.style}}>\n                <Title title=\"Multiple Tokens\" hasInfo></Title>\n\n                <Tabs variant='enclosed'>\n                    <TabList>\n                        <Tab>Percentage Change</Tab>\n                        <Tab>Correlation</Tab>\n                        <Tab>Market Cap</Tab>\n                    </TabList>\n                    <TabPanels>\n                        <TabPanel style={{height:'100%'}}>\n\n                            {tokenPrices.length && (<div><HStack style={{height: '100%'}}>\n\n                                {tokenList &&<div style={{\n                                    marginTop:-200,}}>\n                                <div style={{fontSize:'1.4em'}}>Tokens</div>\n                                <div style={{\n                                    height: 500,\n\n                                    overflowY: 'scroll',\n                                    width: 250,\n                                    borderColor: ColorPalette.thirdColor,\n                                    borderWidth: 1,\n                                    borderRadius: 20,\n                                    padding: 20\n                                }}>\n\n                                    <ul style={{ listStyleType: 'none'}}>\n                                    {tokenList.map((t: any, idx: number) => <li style={{marginBottom:5}}><Checkbox iconColor='red' style={{margin: 5}}\n                                                                                      defaultChecked={checkActiveTokens(t)}\n                                                                                          onChange={(e) => handleCheckBoxChange(e, idx)}>{t.symbol}</Checkbox></li>)}\n                                    </ul>\n                                    {/*<Checkbox style={{margin: 5}} defaultChecked={false}*/}\n                                    {/*          onChange={(e) => handleSelectAll(e)}>Select All</Checkbox>*/}\n\n\n\n                                </div>\n                                </div>}\n\n\n                                {tokenList.length > 0 && (<div style={{marginLeft: 60}}>\n                                    {isLoading && (<div style={{position: 'absolute', marginLeft: 550, marginTop:300}}><AvadaSpinner/></div>)}\n                                    <HeatMap tokensList={tokenList} data={tokenPrices}/>\n                                </div>)}\n\n\n\n\n                            </HStack>\n\n                                    <div style={{\n                                        borderWidth: 1,\n                                        borderStyle: 'solid',\n                                        marginTop: -180,\n                                        borderRadius: 20,\n                                        padding: 20\n                                    }}>\n                                        <HStack>\n                                            <div>\n                                                <span>Start date: </span>\n                                                <span>{startDate}</span>\n                                            </div>\n                                            <div> /</div>\n                                            <div>\n                                                <span>End date: </span>\n                                                <span>{endDate}</span>\n                                            </div>\n                                        </HStack>\n                                        <RangeSlider onChange={(e) => onDateDrag(e)}\n                                                     onChangeEnd={(e) => onChangeDate(e)}\n                                                     defaultValue={[initialOffset, endOffset]}\n                                                     min={1629504000} max={Math.round(Date.now() / 1000)}\n                                                     step={sliderStep} minStepsBetweenThumbs={10}\n                                        >\n                                            <RangeSliderTrack bg={ColorPalette.thirdColor}>\n                                                <RangeSliderFilledTrack bg={ColorPalette.thirdColor}/>\n                                            </RangeSliderTrack>\n                                            <RangeSliderThumb boxSize={6} index={0}/>\n                                            <RangeSliderThumb boxSize={6} index={1}/>\n                                        </RangeSlider>\n                                    </div>\n\n\n\n                            </div>)}\n\n                            {isLoading &&\n                            <AvadaSpinner style={{width: '100%', height: \"100%\", marginTop: 100, marginLeft: 500}}\n                                          message={`Loading price history`}/>}\n\n                        </TabPanel>\n                        <TabPanel>\n                            <p>Correlation!</p>\n                        </TabPanel>\n                        <TabPanel>\n                            <BarRaceChart/>\n                        </TabPanel>\n                    </TabPanels>\n                </Tabs>\n\n            </div>\n        </div>\n\n    )\n}","import * as d3 from \"d3\";\nimport {useEffect, useState} from \"react\";\nimport {ColorPalette} from \"../../styles/color_palette\";\n\n\n\nexport default function SteamGraph(props) {\n\n    const [data, setData] = useState([]);\n    const [maxKey, setMaxKey] = useState(null);\n\n\n    const getMax = (d, keys) => {\n        const maxArray = [];\n        const maxKey = []\n\n        keys.forEach((key,idx)=>{\n            const arr = d.map((a)=>a[key]);\n            console.log(\"MAximu array: \", arr);\n            maxArray.push( Math.max(...arr));\n            maxKey.push(key);\n        })\n        const absMax = Math.max(...maxArray);\n        const index = maxArray.indexOf(absMax);\n        setMaxKey(maxKey[index]);\n        console.log(\"Max array is: \", maxArray);\n        return absMax;\n    }\n\n\n\n    useEffect(()=> {\n        // console.log(\"Initialized!!\");\n        // console.log(\"Received data: \", props.data);\n        if(d3.selectAll(\"svg\")) {\n            d3.selectAll(\"svg\").remove();\n            d3.selectAll(\".tooltip\").remove();\n        }\n        setData(props.data);\n        buildChart(props.data);\n\n    },[props.data])\n\n\n    const buildChart=(chartData)=>{\n        var margin = {top: 20, right: 30, bottom: 0, left: 100},\n        width = 1300 - margin.left - margin.right,\n        height = 600 - margin.top - margin.bottom;\n\n// append the svg object to the body of the page\n    var svg = d3.select(\"#steam_graph\")\n        .append(\"svg\")\n        .attr(\"width\", width + margin.left + margin.right)\n        .attr(\"height\", height + margin.top + margin.bottom)\n        .append(\"g\")\n        .attr(\"transform\",\n            \"translate(\" + margin.left + \",\" + margin.top + \")\");\n\n// Parse the Data\n\n    // List of groups = header of the csv files\n    var keys = props.keys;\n\n\n        // const xScale = d3.scaleTime()\n        //     .domain([new Date(chartData[0].timestamp*1000),new Date(chartData[dates.length -1] * 1000)]) // x ticks\n        //     .range([0, width]) // x width\n\n    // Add X axis\n    var xScale = d3.scaleTime()\n        .domain(d3.extent(chartData, function(d) { return new Date(d.timestamp * 1000); }))\n        .range([ 0, width ]);\n\n    svg.append(\"g\")\n        .attr(\"transform\", \"translate(0,\" + height*0.95 + \")\")\n        .call(d3.axisBottom(xScale).tickSize(-height*0.95).ticks(5))\n            // .tickValues([new Date(chartData[0].timestamp), new Date(chartData[chartData.length -1 ].timestamp)]))\n        .select(\".domain\").remove()\n    // Customization\n    svg.selectAll(\".tick line\").attr(\"stroke\", \"#b8b8b8\")\n\n\n\n    const max = getMax(props.data, props.keys);\n\n\n    // Add Y axis\n    var y = d3.scaleLinear()\n        .domain([-max, max])\n        .range([ height, 0 ]);\n\n\n\n    svg.append(\"g\")\n        // .attr(\"transform\", \"translate(0,\" + width*0.1 + \")\")\n        .call(d3.axisLeft(y).tickSize(-width).ticks(5))\n        .select(\".domain\").remove()\n\n    // color palette\n    var color = d3.scaleOrdinal()\n        .domain(keys)\n        .range(d3.schemeDark2);\n\n    //stack the data?\n    var stackedData = d3.stack()\n        .offset(d3.stackOffsetSilhouette)\n        .keys(keys)\n        (chartData)\n\n    // create a tooltip\n    var Tooltip = svg\n        .append(\"text\")\n        .attr(\"x\", width-200)\n        .attr(\"y\", 0)\n        .style(\"opacity\", 0)\n        .style(\"font-size\", 17)\n\n        svg.append(\"text\")\n            .attr(\"class\", \"y label\")\n            .attr('color', ColorPalette.mainColor)\n            .attr(\"text-anchor\", \"end\")\n            .attr(\"y\", -50 - 10)\n            .attr(\"x\",  - height/2 + 10)\n            .attr(\"dy\", \".75em\")\n            .attr(\"transform\", \"rotate(-90)\")\n            .text('TVL (USD)');\n\n\n    // Three function that change the tooltip when user hover / move / leave a cell\n    var mouseover = function(d) {\n        Tooltip.style(\"opacity\", 1)\n        d3.selectAll(\".myArea\").style(\"opacity\", .2)\n        d3.select(this)\n            .style(\"stroke\", \"black\")\n            .style(\"opacity\", 1)\n    }\n\n    var mousemove = function(d,i) {\n        let grp = d.target.__data__.key\n        Tooltip.text(grp)\n\n    }\n    var mouseleave = function(d) {\n        Tooltip.style(\"opacity\", 0)\n        d3.selectAll(\".myArea\").style(\"opacity\", 1).style(\"stroke\", \"none\")\n    }\n\n    // Area generator\n    var area = d3.area()\n        .x(function(d) { return xScale(new Date(d.data.timestamp*1000)); })\n        .y0(function(d) { return y(d[0]); })\n        .y1(function(d) { return y(d[1]); })\n\n    // Show the areas\n    svg\n        .selectAll(\"steam_graph\")\n        .data(stackedData)\n        .enter()\n        .append(\"path\")\n        .attr(\"class\", \"myArea\")\n        .style(\"fill\", function(d) {return color(d.key); })\n        .attr(\"d\", area)\n        .on(\"mouseover\", mouseover)\n        .on(\"mousemove\", mousemove)\n        .on(\"mouseleave\", mouseleave)\n\n\n}\n\n    return (<><div id=\"steam_graph\"/></>)\n\n}","import Moralis from \"moralis\";\n\n\nexport const getDexList = async () : Promise<any[]> => {\n\n        const DEX = Moralis.Object.extend(\"Dex\")\n        const query = new Moralis.Query(DEX);\n        query.select(\"name\", \"id\");\n        const results = await query.find();\n        const dexList = results.map((r)=>{\n            // const dex = r;\n            return {label:r.get(\"name\"),address: r.get(\"address\"),erc20: r.get(\"erc20address\")}\n        });\n        console.log(\"Got results: \", dexList);\n\n        // console.log(\"Name is: \", dexes[0].get(\"name\"))\n        return dexList;\n    }\n\n\nexport const getPoolList = async () : Promise<any[]> => {\n    const POOL = Moralis.Object.extend(\"DexTokenPairControl\")\n    const query = new Moralis.Query(POOL);\n    query.select(\"dexName\", \"symbol0\",\"symbol1\",\"pairAddress\");\n    const results = await query.find();\n    const poolList = results.map((r)=>{\n        // const dex = r;\n        return {name:r.get(\"dexName\"),token0: r.get(\"symbol0\"),token1: r.get(\"symbol1\"), pairAddress: r.get('pairAddress')}\n    });\n    console.log(\"Got results: \", poolList);\n\n    // console.log(\"Name is: \", dexes[0].get(\"name\"))\n    return poolList;\n\n}\n\n\nexport const getInfoForPools = async (date?: any) => {\n\n    const PoolInfo = Moralis.Object.extend(\"DexTokenPairLiquidity\");\n    const query = new Moralis.Query(PoolInfo);\n    query.select(\"dexName\", \"symbol0\",\"symbol1\",\"reserve0\",\"reserve1\",\"tvl0\",\"tvl1\",\"timeStamp\");\n    if(date) {\n        query.greaterThan(\"timeStamp\", date);\n    }\n    query.limit(5000);\n    query.ascending(\"timeStamp\");\n    const results = await query.find();\n    const processedData = [];\n    const poolInfo = results.map((r:any)=>{\n        return {dexName: r.get(\"dexName\"), symbol0: r.get(\"symbol0\"), symbol1: r.get(\"symbol1\"), reserve0: r.get(\"reserve0\"), reserve1: r.get(\"reserve1\"), tvl0: r.get(\"tvl0\"), tvl1: r.get(\"tvl1\")}\n    })\n\n    return poolInfo;\n}\n\n\nexport const getInfoForPoolsForPair = async (address?: any, date?: any) => {\n\n    const PoolInfo = Moralis.Object.extend(\"DexTokenPairLiquidity\");\n    const query = new Moralis.Query(PoolInfo);\n    query.select(\"dexName\", \"symbol0\",\"symbol1\",\"reserve0\",\"reserve1\",\"tvl0\",\"tvl1\",\"timeStamp\");\n    if(date) {\n        query.greaterThan(\"timeStamp\", date);\n    }\n    query.limit(5000);\n    query.equalTo(\"pairAddress\", address);\n    query.ascending(\"timeStamp\");\n    const results = await query.find();\n    const poolInfo = results.map((r:any)=>{\n        return {dexName: r.get(\"dexName\"), symbol0: r.get(\"symbol0\"), symbol1: r.get(\"symbol1\"),\n            reserve0: Math.round(r.get(\"reserve0\")), reserve1: Math.round(r.get(\"reserve1\")), tvl0: Math.round(r.get(\"tvl0\")), tvl1: Math.round(r.get(\"tvl1\")), timestamp: r.get(\"timeStamp\")}\n    })\n\n    return poolInfo;\n}\n\n","import {HStack, RangeSlider, RangeSliderFilledTrack, RangeSliderThumb, RangeSliderTrack} from \"@chakra-ui/react\";\nimport {ColorPalette} from \"../styles/color_palette\";\nimport React from \"react\";\nimport {dateFromTimeStamp} from \"../../utils/dateUtils\";\n\n\nconst DateSlider = ({startDate, setStartDate,endDate, setEndDate, initialOffset, setInitialOffset, endOffset, setEndOffset, sliderStep, style} : any) => {\n\n\n\n    const onDateDrag = (date: any) => {\n        setStartDate(dateFromTimeStamp(date[0]))\n        setEndDate(dateFromTimeStamp(date[1]))\n    }\n\n    const onChangeDate = (date: any) => {\n        setInitialOffset(date[0]);\n        setEndOffset(date[1]);\n        console.log(\"Fetch data again\");\n    }\n\n\n    return ( <div style={{\n            borderWidth: 1,\n            borderStyle: 'solid',\n            marginTop: style.marginTop,\n            width:'90%',\n            borderRadius: 20,\n            padding: 20\n        }}>\n            <HStack>\n                <div>\n                    <span>Start date: </span>\n                    <span>{startDate}</span>\n                </div>\n                <div> /</div>\n                <div>\n                    <span>End date: </span>\n                    <span>{endDate}</span>\n                </div>\n            </HStack>\n            <RangeSlider onChange={(e) => onDateDrag(e)}\n                         onChangeEnd={(e) => onChangeDate(e)}\n                         defaultValue={[initialOffset, endOffset]}\n                         min={1629504000} max={Math.round(Date.now() / 1000)}\n                         step={sliderStep} minStepsBetweenThumbs={10}\n            >\n                <RangeSliderTrack bg={ColorPalette.thirdColor}>\n                    <RangeSliderFilledTrack bg={ColorPalette.thirdColor}/>\n                </RangeSliderTrack>\n                <RangeSliderThumb boxSize={6} index={0}/>\n                <RangeSliderThumb boxSize={6} index={1}/>\n            </RangeSlider>\n        </div>\n    )\n\n\n}\n\n\nexport default DateSlider;","import SteamGraph from \"./charts/steamChart/SteamGraph\";\nimport React, {useEffect, useState} from \"react\";\nimport {getInfoForPools, getInfoForPoolsForPair, getPoolList} from \"../services/dexService\";\nimport {Checkbox, HStack} from \"@chakra-ui/react\";\nimport Title from \"./genericComponents/Title\";\nimport SteamGraph2 from \"./charts/steamChart/SteamGraph2\";\nimport SteamGraph3 from \"./charts/steamChart/SteamGraph3\";\nimport {ColorPalette} from \"./styles/color_palette\";\nimport DateSlider from \"./genericComponents/DateSlider\";\nimport {dateFromTimeStamp} from \"../utils/dateUtils\";\n\nconst addressesToInclude = [\"0x8fb5bd3ac8efd05dacae82f512dd03e14aadab73\",\"0x72c3438cf1c915ecf5d9f17a6ed346b273d5bf71\",\"0x3daf1c6268362214ebb064647555438c6f365f96\",\"0x454e67025631c065d3cfad6d71e6892f74487a15\"\n    ,\"0xfe15c2695f1f920da45c30aae47d11de51007af9\",\"0x1643de2efb8e35374d796297a9f95f64c082a8ce\",\"0x87dee1cc9ffd464b79e058ba20387c1984aed86a\",\"0xa6908c7e3be8f4cd2eb704b5cb73583ebf56ee62\"\n    ,\"0x6f3a0c89f611ef5dc9d96650324ac633d02265d3\",\"0xd5a37dc5c9a396a03dd1136fc76a1a02b1c88ffa\",\"0xb5c9e891af3063004a441ba4fab4ca3d6deb5626\",\"0xed8cbd9f0ce3c6986b22002f03c6475ceb7a6256\",\n    \"0x2774516897ac629ad3ed9dcac7e375dda78412b9\",\"0x67926d973cd8ee876ad210faaf7dffa99e414acf\",\"0x63abe32d0ee76c05a11838722a63e012008416e6\",\"0xa389f9430876455c36478deea9769b7ca4e3ddb1\",\n    \"0x781655d802670bba3c89aebaaea59d3182fd755d\",\"0x2e02539203256c83c7a9f6fa6f8608a32a2b1ca2\",\"0xf64e1c5b6e17031f5504481ac8145f4c3eab4917\",\"0xb9f425bc9af072a91c423e31e9eb7e04f226b39d\",\n    \"0x62475f52add016a06b398aa3b2c2f2e540d36859\",\"0x140cac5f0e05cbec857e65353839fddd0d8482c1\",\"0xc2ea99c031b05ae03044c857c78afb5671dee96b\",\"0xc3e6d9f7a3a5e3e223356383c7c055ee3f26a34f\",\n    \"0x113f413371fc4cc4c9d6416cf1de9dfd7bf747df\",\"0x361221991b3b6282ff3a62bc874d018bfaf1f8c8\",\"0x199fb78019a08af2cb6a078409d0c8233eba8a0c\",\"0x7b7617c7b2236d7871741783cae8bcc222c2e05d\",\n    \"0xbe4b31fce1885fcd0e3351aa8b392fbcc4ef6036\",\"0x50141c21e4e861d4b2cbeb825b9a2b5e5e09a186\"]\n//\n//\n// const findIndexByTimestamp = (element:any) => {\n//     if (element['timestamp'] === this.timestamp) {\n//         return 1;\n//     }\n//     return -1;\n// }\n//\n\n\n\nconst PoolView = (props:any) => {\n\n    const [data, setData] = useState<any>([]);\n    const [poolList, setPoolList] = useState<any[]>([]);\n    const [activePools,setActivePools] = useState<any>([]);\n    const [graphReady, setGraphReady] = useState<boolean>(false);\n    const [keys, setKeys] = useState<string[]>([]);\n    const [lastRequestLength, setLastRequestLength] = useState<any>(0);\n    const [initialOffset, setInitialOffset] = useState((Date.now() - 30 * 24 * 60 * 60 * 1000) / 1000); // 30 days in the past in seconds\n    const [startDate, setStartDate] = useState<any>(dateFromTimeStamp(initialOffset));\n    const [endDate, setEndDate] = useState(dateFromTimeStamp(Date.now() / 1000));\n    const [endOffset, setEndOffset] = useState(Math.round(Date.now() / 1000));\n\n    useEffect(()=> {\n\n        getPoolList()\n            .then((p)=>{\n                console.log(\"Pools: \", p);\n                const pools = p.filter(r=>addressesToInclude.includes(r.pairAddress));\n                setPoolList(pools);\n            });\n    }, [])\n\n    useEffect(()=> {\n        if(poolList.length > 0) {\n            console.log(\"Will activate: \", poolList[0]);\n            setActivePools([poolList[0]]);\n            console.log(\"Active pool is: \", activePools);\n        }\n    },[poolList])\n\n    const handleCheckBoxChange = (e:any,idx:number) => {\n        console.log(\"CheckBoxChanged to: \", e.target.checked);\n        console.log(\"With value: \", e.target.value);\n\n        if(e.target.checked) {\n            // Add new token to active pool list\n            setActivePools([...activePools, poolList[idx]]);\n        } else {\n            // Remove using value...\n            console.log(\"Filtering: \", e.target.value);\n            setActivePools(activePools.filter((ap:any)=>ap.pairAddress != e.target.value));\n        }\n\n        //Chec\n\n    }\n\n    useEffect(()=>{\n        console.log(\"Current list is: \", activePools);\n        console.log(\"Last request length: \", lastRequestLength);\n\n        if(activePools.length > 0){\n\n            if(activePools.length > lastRequestLength) {\n                getInfoForPoolsForPair(activePools[activePools.length -1].pairAddress)\n                    .then((d)=>{\n                        const newArr : any[] = [];\n                        const newKey = 'tvl'+d[0].symbol0+'-'+d[0].symbol1;\n\n                        if(data.length >0) {\n                            d.map((nd:any, idx:number) => {\n                                const obj : any = {};\n                                obj[newKey] = nd.tvl0 + nd.tvl1;\n                                Object.assign(data[idx],{...obj})\n                                // newArr.push(obj);\n                            })\n                            setData(()=>[...data]);\n\n                        } else {\n                            d.map((nd:any, idx:number) => {\n                                const obj : any = {};\n                                obj[newKey] = nd.tvl0 + nd.tvl1;\n                                obj[\"timestamp\"] = nd.timestamp;\n                                newArr.push(obj);\n                            })\n                            setData(()=>[...newArr]);\n                        }\n                        keys.push(newKey)\n                        setKeys(keys);\n                    })\n            } else {\n                // Remove from current array\n                const addressArray = activePools.map((ap:any)=>`tvl${ap.token0}-${ap.token1}`);\n                console.log(\"Address array is: \", addressArray);\n                const keys = Object.keys(data[0]).filter(k=>k!=\"timestamp\");\n                console.log(\"Keys is: \", keys);\n                const addressToRemove = keys.filter((a:any)=>!addressArray.includes(a))[0];\n                console.log(\"Address to remove: \", addressToRemove);\n                const newArr = data.map((d:any)=>{\n                    delete d[addressToRemove];\n                    return d;\n                });\n                console.log(\"New data arr: \", data);\n                const keyIndex = keys.indexOf(addressToRemove);\n                const newKeys = keys.filter((k)=>k!=addressToRemove);\n                setKeys(newKeys);\n                setData(newArr)\n            }\n\n        }\n        setLastRequestLength(activePools.length);\n\n    },[activePools])\n\n\n    useEffect(()=>{\n        console.log(\"Keys changed to: \", keys);\n    },[keys])\n\n\n    const checkIsActive = (idx:number, t:any) : boolean => {\n        console.log(\"Returning:\");\n        console.log(`${t.token0}/${t.token1}` == `${activePools[idx]?.token0}/${activePools[idx]?.token1}`)\n        console.log(\"For\", `${t.token0}/${t.token1}`)\n        return `${t.token0}/${t.token1}` == `${activePools[idx]?.token0}/${activePools[idx]?.token1}`\n    }\n\n\n    return (<div>\n        <Title title=\"Pools\" hasInfo></Title>\n\n        <HStack>\n            {activePools.length>0 && (<div style={{\n                height: 600,\n                overflowY: 'scroll',\n                width: 250,\n                borderColor: ColorPalette.thirdColor,\n                borderWidth: 1,\n                borderRadius: 20,\n                padding: 20\n            }}>\n\n                <ul style={{ listStyleType: 'none'}}>\n                    {poolList.map((t: any, idx: number) => <li style={{marginBottom:5}}><Checkbox iconColor='red' style={{margin: 5}}\n                                                                                                  defaultChecked={checkIsActive(idx,t)}\n                                                                                                  value={t.pairAddress}\n                                                                                                  onChange={(e) => handleCheckBoxChange(e, idx)}>{t.token0}/{t.token1}</Checkbox></li>)}\n                </ul>\n            </div>)}\n\n\n            <div style={{height:600, borderWidth:1, borderRadius:20, marginLeft: 60,marginBottom:20}}>\n                {data.length > 0 && <SteamGraph data={data} keys={keys}/>}\n            </div>\n\n        </HStack>\n        <DateSlider style={{marginTop:50}} startDate={startDate} setStartDate={setStartDate} endDate={endDate} setEndDate={setEndDate}\n                    initialOffset={initialOffset} setInitialOffset={setInitialOffset} endOffset={endOffset} setEndOffset={setEndOffset} sliderStep={24 * 60 * 60}></DateSlider>\n\n        {/*{poolList.map((t:any, idx: number) =>*/}\n        {/*    <Checkbox style={{margin:5}} defaultChecked={false} value={t.pairAddress} onChange={(e)=>handleCheckBoxChange(e, idx)}>{t.token0}/{t.token1}</Checkbox>)}*/}\n\n\n\n\n    </div>)\n\n\n}\n\n\nexport default PoolView;","\n\nconst UnderConstruction = (props :any) => {\n\n    return (\n        <div>\n            <h1>Under construction!</h1>\n            \n        </div>\n    )\n\n\n\n}\n\nexport default UnderConstruction;","import React, {useEffect, useState} from \"react\";\nimport \"./App.css\";\nimport Moralis from \"moralis\";\nimport Navbar from \"./components/navbar/Navbar\";\nimport { useMoralis } from \"react-moralis\";\nimport Tokens from \"./components/Tokens\";\nimport { BrowserRouter, Route, Routes } from \"react-router-dom\";\nimport TokenView from \"./components/TokenView\";\nimport CandleStickTemplate from \"./components/charts/candlestick/CandleStickTemplate\";\nimport {appId, serverUrl} from \"./index\";\nimport Pools from \"./components/Pools\";\nimport {Dashboard} from \"./components/dashboard/Dashboard\";\nimport set = Moralis.CoreManager.set;\nimport {Sidebar} from \"./components/sidebar/Sidebar\";\nimport {\n    Button, DrawerBody,\n    DrawerCloseButton,\n    DrawerContent, DrawerFooter,\n    DrawerHeader,\n    DrawerOverlay,\n    Grid, Drawer,\n    GridItem, Input,\n    useDisclosure, Flex\n} from \"@chakra-ui/react\";\nimport {MultipleTokens} from \"./components/MultipleTokens\";\nimport PoolView from \"./components/PoolView\";\nimport {ColorPalette} from \"./components/styles/color_palette\";\nimport UnderConstruction from \"./components/genericComponents/UnderConstruction\";\n\n\n\n\n\nfunction App() {\n  Moralis.initialize(appId);\n  Moralis.serverURL = serverUrl;\n\n  const { authenticate, isAuthenticating, isAuthenticated, logout, authError } =\n    useMoralis();\n\n  const authVars = {authenticate, isAuthenticating, isAuthenticated, logout, authError}\n    const [user,setUser] = useState();\n    const [navSize, setNavSize] = useState('large');\n\n  useEffect(()=>console.log(\"User now is: \", user),[user])\n\n  // const [welcomeMessage, setWelcomeMessage] = useState(\"\");\n\n  // const [dexList, setDexList] = useState<any[]>([]);\n\n  return (\n    <Flex style={{backgroundColor:ColorPalette.backgroundColor, height:'100vh', fontStyle:'nunito'}}>\n\n        <BrowserRouter  >\n\n          <Grid h=\"95vh\" w='99vw' templateColumns='repeat(10, 1fr)'>\n\n\n\n                <GridItem clsSpan={2} style={{height:\"100vh\"}}>\n                  <Sidebar navSize={navSize} setNavSize={setNavSize}/>\n                </GridItem>\n\n                <GridItem colSpan={9} style={{marginLeft:20, width:'100%',overflow:'auto'}}>\n                      <Routes>\n                      <Route path=\"/\" element={<Dashboard/>} />\n                      <Route path=\"/tokens\" element={<Tokens/>} />\n                      <Route path=\"/multiTokens\" element={<MultipleTokens />} />\n                      <Route path=\"/token/:address\" element={<TokenView/>} />\n\n                      <Route path=\"/pools\" element={<PoolView />} />\n                          <Route path=\"/whales\" element={<UnderConstruction/>} />\n                          <Route path=\"/memPools\" element={<UnderConstruction/>} />\n                          <Route path=\"/bridges\" element={<UnderConstruction/>} />\n\n                          <Route path=\"/pool/:token0/:token1\"  element={<PoolView/>} />\n                    <Route path=\"/statistics\"  element={<CandleStickTemplate />} />\n\n                    </Routes>\n                </GridItem>\n          </Grid>\n          {/*</div>*/}\n      </BrowserRouter>\n    </Flex>\n  )\n  \n}\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\nimport {ChakraProvider, extendTheme} from \"@chakra-ui/react\";\nimport {MoralisProvider} from \"react-moralis\";\n// import WithSubnavigation from \"./components/Navbar\";\n\n\nconst theme = extendTheme({\n    'config': {\n        initialColorMode:'light'\n    }\n});\n\n// export const appId = \"3zMC9oNElQZ4Ew0pzpmSwzve9r7JTj1tajiJwQx6\";\n// export const serverUrl = \"https://1tm9bltzoknp.usemoralis.com:2053/server\";\nexport const serverUrl = \"https://dwphjko0r4hx.usemoralis.com:2053/server\";\nexport const appId = \"Mgs7zi861Gx6HwE30jwiGuVBsP7LXybNW0x4UscU\";\n\nReactDOM.render(\n  <React.StrictMode>\n      <MoralisProvider appId={appId} serverUrl={serverUrl}>\n          <ChakraProvider theme={theme}>\n              <App />\n          </ChakraProvider>\n      </MoralisProvider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}